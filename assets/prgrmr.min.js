/**
 * prgrmr
 *
 * Programmer profile for GitHub projects
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2013 Jason Mulligan
 * @license BSD-3 <https://raw.github.com/avoidwork/prgrmr/master/LICENSE>
 * @link https://github.com/avoidwork/prgrmr
 * @version 0.1.0
 */
(function(e){"use strict";var t,n={blog:{},config:{},events:{},orgs:{},repos:{},version:"0.1.0"},r={events:"https://api.github.com/users/{{user}}/events",orgs:"https://api.github.com/users/{{user}}/orgs",repos:"https://api.github.com/users/{{user}}/repos"},i=function(n){var r=n.message||n;t.log(r,"error"),e.humane.error(r)},s=function(e){void 0},o=function(){var o=t("header > h1")[0],u=t("title")[0],c=t("#version"),h=t("#year"),p=t("article")[0],d;e.humane.error=e.humane.spawn({addnCls:"humane-jackedup-error",timeout:3e3}),c.html(n.version),h.html((new Date).getFullYear()),t("header > h1").text(),d=l(p,"large"),"assets/config.json".get(function(e){if(e.github.isEmpty())throw Error(t.label.error.invalidArguments);n.config=e,o.html(o.html()+": "+e.name),u.html(u.html()+": "+e.name)},function(e){throw i(e),e}).then(function(i){t.iterate(r,function(e,t){r[t]=e.replace("{{user}}",i.github)}),t.iterate(n,function(e,n){this[n]=t.data({id:n},null,{key:"id"})}),e.prgrmr=n},function(e){throw i("Configuration is not valid: "+(e.message||e)),e}).then(function(e){n.events.data.setUri(r.events).then(function(e){d.el.destroy(),s(e)},function(e){d.el.destroy(),i(e)}),n.orgs.data.setUri(r.orgs).then(function(e){d.el.destroy(),a(e)},function(e){d.el.destroy(),i(e)}),n.repos.data.setUri(r.repos).then(function(e){d.el.destroy(),f(e)},function(e){d.el.destroy(),i(e)}),n.events.setExpires(300),n.orgs.setExpires(300),n.repos.setExpires(300),e.tumblr.isEmpty()||n.blog.data.setUri(e.tumblr).then(function(e){tumblr(e)},function(e){i(e)})},function(e){i("Could not consume APIs")})},u=function(e,n){n=n===!0,t.log(e),n||humane.log(e)},a=function(e){void 0},f=function(e){void 0},l=function(e,n){e=t.object(e),n=n||"small";var r,i;i={lines:13,length:5,width:2,radius:5,corners:1,rotate:0,color:"#000",speed:1,trail:70,shadow:!0,hwaccel:!0,className:"spinner",zIndex:2e9,top:"auto",left:"auto"};switch(n){case"small":i.length=4,i.radius=4,i.width=2;break;case"medium":i.length=7,i.radius=7,i.width=3;break;case"large":default:i.length=12,i.radius=12,i.width=3}return r=(new Spinner(i)).spin(e),r},c=function(e,n){var r=t.promise();return utility.defer(function(){var e={};r.resolve(e)}),r};t=e[abaaso.aliased],t.on("render",function(){o()})})(this);