/**
 * prgrmr
 *
 * Programmer profile for GitHub projects
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2013 Jason Mulligan
 * @license BSD-3 <https://raw.github.com/avoidwork/prgrmr/master/LICENSE>
 * @link https://github.com/avoidwork/prgrmr
 * @version 0.1.0
 */
(function(e){"use strict";var t,n={blog:{},config:{},events:{},orgs:{},repos:{},version:"0.1.0"},r={events:"https://api.github.com/users/{{user}}/events",orgs:"https://api.github.com/users/{{user}}/orgs",repos:"https://api.github.com/users/{{user}}/repos"},i=function(n){var r=n.message||n;t.log(r,"error"),e.humane.error(r)},s=function(e){void 0},o=function(){var o=t("header > h1")[0],u=t("title")[0],l=t("#version"),c=t("#year");e.humane.error=e.humane.spawn({addnCls:"humane-jackedup-error",timeout:3e3}),l.html(n.version),c.html((new Date).getFullYear()),t("header > h1").text(),"assets/config.json".get(function(e){n.config=e,o.html(o.html()+": "+e.name),u.html(u.html()+": "+e.name)},function(e){throw i(e),e}).then(function(i){if(i.github.isEmpty())throw Error(t.label.error.invalidArguments);t.iterate(r,function(e,t){r[t]=e.replace("{{user}}",i.github)}),t.iterate(n,function(e,n){this[n]=t.data({id:n},null,{key:"id"})}),e.prgrmr=n},function(e){throw i("Configuration is not valid: "+(e.message||e)),e}).then(function(e){n.events.data.setUri(r.events).then(function(e){s(e)},function(e){i(e)}),n.orgs.data.setUri(r.orgs).then(function(e){a(e)},function(e){i(e)}),n.repos.data.setUri(r.repos).then(function(e){f(e)},function(e){i(e)}),n.events.setExpires(300),n.orgs.setExpires(300),n.repos.setExpires(300),e.tumblr.isEmpty()||n.blog.data.setUri(e.tumblr).then(function(e){tumblr(e)},function(e){i(e)})},function(e){i("Could not consume APIs: "+(e.message||e))})},u=function(e,n){n=n===!0,t.log(e),n||humane.log(e)},a=function(e){void 0},f=function(e){void 0},l=function(e,n){var r=t.promise();return utility.defer(function(){var e={};r.resolve(e)}),r};t=e[abaaso.aliased],t.on("render",function(){o()})})(this);