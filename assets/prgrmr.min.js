/**
 * prgrmr
 *
 * Programmer profile for GitHub projects
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2013 Jason Mulligan
 * @license BSD-3 <https://raw.github.com/avoidwork/prgrmr/master/LICENSE>
 * @link https://github.com/avoidwork/prgrmr
 * @version 0.1.0
 */
(function(e){"use strict";var t,n={blog:{},config:{},events:{},orgs:{},repos:{},templates:{},version:"0.1.0"},r={events:"https://api.github.com/users/{{user}}/events",orgs:"https://api.github.com/users/{{user}}/orgs",repos:"https://api.github.com/users/{{user}}/repos"},i=function(e){var n=t("#charts");n.removeClass("hidden")},s=function(n){var r=n.message||n;t.log(r,"error"),e.humane.error(r)},o=function(){var i=t("header > h1")[0],o=t("title")[0],u=t("#version"),a=t("article")[0],c;e.humane.error=e.humane.spawn({addnCls:"humane-jackedup-error",timeout:3e3}),u!=="undefined"&&u.html(n.version),c=l(a,"large"),"assets/config.json".get(function(e){if(e.github.isEmpty())throw Error(t.label.error.invalidArguments);n.config=e,i.html(e.name),o.html(e.name)},function(e){throw s(e),e}).then(function(i){t.iterate(r,function(e,t){r[t]=e.replace("{{user}}",i.github)}),t.iterate(n,function(e,n){this[n]=t.data({id:n},null,{key:"id",events:!1})}),e.prgrmr=n},function(e){throw s("Configuration is not valid: "+(e.message||e)),e}).then(function(e){f("events",c),f("orgs",c),f("repos",c)},function(e){s("Could not consume APIs")})},u=function(e,n){n=n===!0,t.log(e),n||humane.log(e)},a=function(e){var r=t("#"+e),s;s=function(e){void 0},n[e].datalist=t.datalist(r,n[e].data,n.templates[e],s),r.removeClass("hidden"),i(e)},f=function(e,i){var o=t.promise();return n[e].data.setUri(r[e]).then(function(){("templates/"+e+".html").get(function(t){n.templates[e]=t,i!==null&&(i.el.destroy(),i=null),a(e),n[e].setExpires(300),o.resolve(!0)},function(e){o.reject(e),s(e)})},function(e){i!==null&&(i.el.destroy(),i=null),o.reject(e),s(e)}),o},l=function(e,n){e=t.object(e),n=n||"small";var r,i;i={lines:13,length:5,width:2,radius:5,corners:1,rotate:0,color:"#000",speed:1,trail:70,shadow:!0,hwaccel:!0,className:"spinner",zIndex:2e9,top:"auto",left:"auto"};switch(n){case"small":i.length=4,i.radius=4,i.width=2;break;case"medium":i.length=7,i.radius=7,i.width=3;break;case"large":default:i.length=12,i.radius=12,i.width=3}return(new Spinner(i)).spin(e)},c=function(e,n){var r=t.promise();return utility.defer(function(){var e={};r.resolve(e)}),r};typeof abaaso!="undefined"&&(t=e[abaaso.aliased],t.on("render",function(){o()}))})(this);