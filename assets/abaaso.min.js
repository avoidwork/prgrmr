/*
 2013 Jason Mulligan
 @license BSD-3 <https://raw.github.com/avoidwork/abaaso/master/LICENSE>
 @link http://abaaso.com
 @module abaaso
 @version 3.7.14
*/
(function(D){var z=D.document,N=D.location,E=D.navigator,y="undefined"!==typeof exports,O,H,X,Y,ca;void 0===D.abaaso&&(y&&(ca=require("url"),X=require("http"),Y=require("https"),"undefined"===typeof Storage&&(localStorage=require("localStorage")),"undefined"===typeof XMLHttpRequest&&(XMLHttpRequest=null)),H=function(){function O(a){this.autosave=!1;this.callback=null;this.collections=[];this.crawled=!1;this.credentials=null;this.datalists=[];this.depth=0;this.events=!0;this.expires=null;this.headers=
{Accept:"application/json"};this.ignore=[];this.key=null;this.keys={};this.leafs=[];this.loaded=!1;this.maxDepth=0;this.parentNode=a;this.pointer=null;this.records=[];this.retrieve=this.recursive=!1;this.source=null;this.total=0;this.views={};this.uri=null}function Z(a,b,c){this.callback=null;this.element=a;this.emptyMsg="Nothing to display";this.filter=null;this.id=h.genId();this.pageIndex=1;this.pageSize=null;this.pageRange=5;this.pagination="bottom";this.order=this.placeholder="";this.records=
[];this.template=c;this.total=0;this.sensitivity="ci";this.store=b;this.where=null}function $(){var a=this;this.promise=x.factory();this.onDone=[];this.onAlways=[];this.onFail=[];h.when(this.promise).then(function(b){g.each(a.onDone,function(a){a(b)});g.each(a.onAlways,function(a){a(b)});a.onAlways=[];a.onDone=[];a.onFail=[]},function(b){g.each(a.onFail,function(a){a(b)});g.each(a.onAlways,function(a){a(b)});a.onAlways=[];a.onDone=[];a.onFail=[]})}function aa(a,b,c){this.element=a;this.datalist=b;
this.debounce=c;this.filters={}}function ba(a,b,c,d,e,k){var p;void 0!==e&&!m.isEmpty(e.order)&&(p=m.explode(e.order),p=p.map(function(a){return a.replace(/\s+.*/,"")}));this.element=a;this.fields=c;this.filter=null;this.filtered=!0===k;this.initialized=!1;this.list=null;this.options=e||{};this.store=b;this.sortable=d||[];this.sortOrder=p||d||[]}function Q(){this.children=[];this.error=[];this.fulfill=[];this.outcome=this.parentNode=null;this.state=x.state.pending}var u,M,da,r={android:/android/i,
allow:/^allow$/i,allow_cors:/^access-control-allow-methods$/i,alphanum:/^[a-zA-Z0-9]+$/,auth:/\/\/(.*)\@/,blackberry:/blackberry/i,"boolean":/^(0|1|true|false)?$/,boolean_number_string:/boolean|number|string/,checked_disabled:/checked|disabled/i,chrome:/chrome/i,complete_loaded:/^(complete|loaded)$/i,csv_quote:/^\s|\"|\n|,|\s$/,del:/^del/,decimal:/^\d+.(\d+)/,desc:/\s*desc$/i,domain:/^[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?/,down:/down/,down_up:/down|up/,email:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,
element_update:/innerHTML|innerText|textContent|type|src/,firefox:/firefox/i,get_headers:/^(head|get|options)$/,get_remove_set:/get|remove|set/,hash:/\#/,hash_bang:/^\#\!?/,header_replace:/:.*/,header_value_replace:/.*:\s+/,http_body:/200|202|203|206/,http_ports:/80|443/,ie:/msie|ie/i,input_button:/button|submit|reset/,integer:/(^-?\d\d*$)/,ip:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,is_xml:/<[^>]+>[^<]*]+>/,ios:/ipad|iphone/i,json_maybe:/json|plain|javascript/,
json_wrap:/^[\[\{]/,jsonp_wrap:/([a-zA-Z0-9\.]+\()(.*)(\))$/,linux:/linux|bsd|unix/i,nil:/^null/i,no:/no/i,not_endpoint:/.*\//,notEmpty:/\w{1,}/,number:/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)|number/,number_format_1:/.*\./,number_format_2:/\..*/,number_present:/\d{1,}/,number_string:/number|string/i,number_string_object:/number|object|string/i,null_undefined:/null|undefined/,observer_allowed:/click|error|key|mousedown|mouseup|submit/i,observer_globals:/body|document|window/i,object_type:/\[object Object\]/,
object_undefined:/object|undefined/,opera:/opera/i,osx:/macintosh/i,patch:/^patch$/,phone:/^([0-9\(\)\/\+ \-\.]+)$/,playbook:/playbook/i,plural:/s$/,put_post:/^(post|put)$/i,radio_checkbox:/^(radio|checkbox)$/i,reflect:/function\s+\w*\s*\((.*?)\)/,root:/^\/[^\/]/,route_nget:/^(head|options)$/i,route_methods:/^(all|delete|get|put|post|head|options)$/i,safari:/safari/i,scheme:/.*\/\//,select:/select/i,selector_many:/\:|\./,selector_complex:/\s|\>/,sensitivity_types:/ci|cs|ms/,set_del:/^(set|del|delete)$/,
sort_needle:/:::(.*)$/,space_hyphen:/\s|-/,string_boolean:/^(true|false)$/i,string_object:/string|object/i,string_true:/^true$/i,svg:/svg/,top_bottom:/top|bottom/i,true_undefined:/true|undefined/i,url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,
webos:/webos/i,windows:/windows/i,xml:/xml/i},g={add:function(a,b){g.contains(a,b)||a.push(b);return a},cast:function(a,b){return y||!s.ie||8<s.version?function(a,b){b=!0===b;var e=[];isNaN(a.length)?b?e=g.keys(a):h.iterate(a,function(a){e.push(a)}):e=Array.prototype.slice.call(a);return e}:function(a,b){b=!0===b;var e=[];if(isNaN(a.length))b?e=g.keys(a):h.iterate(a,function(a){e.push(a)});else try{e=Array.prototype.slice.call(a)}catch(k){h.iterate(a,function(a,c){"length"!==c&&e.push(a)})}return e}},
chunk:function(a,b){for(var c=[],d=w.round(a.length/b,"up"),e=0,k=-1;++k<d;)e=k*b,c.push(g.limit(a,e,b));return c},clear:function(a){return 0<a.length?g.remove(a,0,a.length):a},clone:function(a){return h.clone(a)},contains:function(a,b){return-1<g.index(a,b)},collect:function(a,b){var c=[];g.each(a,function(a){c.push(b(a))});return c},compact:function(a,b){var c=[],c=a.filter(function(a){return!r.null_undefined.test(a)});return!b?c:c.length<a.length?c:null},count:function(a,b){return a.filter(function(a){return a===
b}).length},diff:function(a,b){var c=[];g.each(a,function(a){g.contains(b,a)||g.add(c,a)});g.each(b,function(b){g.contains(a,b)||g.add(c,b)});return c},each:function(a,b){for(var c=a.length,d=-1;++d<c&&!1!==b.call(a,a[d],d););return a},empty:function(a){return 0===a.length},equal:function(a,b){return G.encode(a)===G.encode(b)},fill:function(a,b,c,d){var e="function"===typeof b,k=a.length;c=!isNaN(c)?c:0;d=!isNaN(d)?c+d:k-1;for(d>k-1&&(d=k-1);c<=d;c++)a[c]=e?b(a[c]):b;return a},first:function(a){return a[0]},
flat:function(a){var b=[];return b=a.reduce(function(a,b){return a.concat(b)},b)},index:function(a,b){return a.indexOf(b)},indexed:function(a){var b=[];h.iterate(a,function(a,d){"object"===typeof a?b=b.concat(g.indexed(a)):b.push(a)});return b},intersect:function(a,b){var c=a.length>b.length?a:b,d=c===a?b:a;return c.filter(function(a){return g.contains(d,a)})},keep_if:function(a,b){if("function"!==typeof b)throw Error(t.error.invalidArguments);var c=[],c=[],c=a.filter(b),c=g.diff(a,c);g.each(c,function(c,
b){g.remove(a,g.index(a,c))});return a},keys:function(){return"function"===typeof Object.keys?function(a){return Object.keys(a)}:function(a){var b=[];h.iterate(a,function(a,d){b.push(d)});return b}}(),last:function(a,b){var c=a.length-1;return b>=c+1?a:isNaN(b)||1===b?a[c]:g.limit(a,c- --b,c)},limit:function(a,b,c){var d=[],e=b-1;b+=c;c=a.length;if(0<c)for(;++e<b&&e<c;)d.push(a[e]);return d},max:function(a){return g.last(a.sort(g.sort))},mean:function(a){return 0<a.length?g.sum(a)/a.length:void 0},
median:function(a){var b=a.length,c=w.round(b/2,"down");a=a.sort(g.sort);return w.odd(b)?a[c]:(a[c-1]+a[c])/2},merge:function(a,b){g.each(b,function(c){a.push(c)});return a},min:function(a){return a.sort(g.sort)[0]},mingle:function(a,b){return a.map(function(a,d){return[a,b[d]]})},mode:function(a){var b={},c=0,d=0,e=[],k;g.each(a,function(a){!isNaN(b[a])?++b[a]:b[a]=1});c=g.max(g.cast(b));h.iterate(b,function(a,b){a===c&&e.push(w.parse(b))});d=e.length;0<d&&(k=1===d?e[0]:e);return k},range:function(a){return g.max(a)-
g.min(a)},rassoc:function(a,b){var c;g.each(a,function(d,e){if(d[1]===b)return c=a[e],!1});return c},reject:function(a,b){return g.diff(a,a.filter(b))},replace:function(a,b){g.remove(a,0,a.length);g.each(b,function(c){a.push(c)});return a},remove:function(a,b,c){if(isNaN(b)){if(b=a.index(b),-1===b)return a}else b=b||0;var d=a.length;c=a.slice((c||b)+1||d);a.length=0>b?d+b:b;a.push.apply(a,c);return a},remove_if:function(a,b){if("function"!==typeof b)throw Error(t.error.invalidArguments);var c=[],
c=a.filter(b);g.each(c,function(c,b){g.remove(a,g.index(a,c))});return a},remove_while:function(a,b){if("function"!==typeof b)throw Error(t.error.invalidArguments);var c=[];g.each(a,function(a){if(!1!==b(a))c.push(a);else return!1});g.each(c,function(c,b){g.remove(a,g.index(a,c))});return a},rest:function(a,b){b=b||1;1>b&&(b=1);return g.limit(a,b,a.length)},rindex:function(a,b){var c=-1;g.each(a,function(a,e){a===b&&(c=e)});return c},rotate:function(a,b){var c=[],c=a.length;0===b?c=a:(0>b?b+=c:b--,
c=g.limit(a,b,c),c=c.concat(g.limit(a,0,b)));return c},series:function(a,b,c){a=a||0;c=c||1;var d=[],e=-1;for(b=Math.max(0,Math.ceil(((b||a)-a)/c));++e<b;)d[e]=a,a+=c;return d},split:function(a,b){var c=[],d=a.length,e=Math.ceil(d/b),k=Math.floor(d/b),p=Math.ceil(d/e),A=!1,h=0,l=-1;for(w.diff(d,b*e)>e&&(p=d-k*b+k-1);++l<b;)!A&&(p<b&&l===p)&&(--e,A=!0),0<l&&(h+=e),c.push(g.limit(a,h,e));return c},sort:function(a,b){var c=!1,d=0;!isNaN(a)&&!isNaN(b)&&(c=!0);a=c?w.parse(a):a.toString();b=c?w.parse(b):
b.toString();a<b?d=-1:a>b&&(d=1);return d},sum:function(a){var b=0;0<a.length&&(b=a.reduce(function(a,b){return a+b}));return b},take:function(a,b){return g.limit(a,0,b)},total:function(a){return g.indexed(a).length},toObject:function(a){for(var b={},c=a.length;c--;)b[c.toString()]=a[c];return b},unique:function(a,b){var c=[];g.each(a,function(a){g.add(c,a)});return c},zip:function(a,b){var c=[];b instanceof Array||(b="object"===typeof b?g.cast(b):[b]);g.each(b,function(a,c){a instanceof Array||(this[c]=
[a])});g.each(a,function(a,e){c[e]=[a];g.each(b,function(a){c[e].push(a[e]||null)})});return c}},B={items:{},clean:function(){return h.iterate(B.items,function(a,b){B.expired(b)&&B.expire(b)})},expire:function(a,b){b=!0===b;return void 0!==B.items[a]?(delete B.items[a],b||n.fire(a,"beforeExpire, expire, afterExpire"),!0):!1},expired:function(a){a=B.items[a];return void 0!==a&&void 0!==a.expires&&a.expires<new Date},get:function(a,b){a=h.parse(a).href;return void 0===B.items[a]?!1:!1!==b&&B.expired(a)?
(B.expire(a),!1):h.clone(B.items[a])},set:function(a,b,c){a=h.parse(a).href;void 0===B.items[a]&&(B.items[a]={},B.items[a].permission=0);"permission"===b?B.items[a].permission|=c:"!permission"===b?B.items[a].permission&=~c:B.items[a][b]=c;return B.items[a]}},s={activex:function(){var a=!1;if("undefined"!==typeof ActiveXObject)try{new ActiveXObject("Microsoft.XMLHTTP"),a=!0}catch(b){void 0}return a}(),android:!y&&r.android.test(E.userAgent),blackberry:!y&&r.blackberry.test(E.userAgent),chrome:!y&&
r.chrome.test(E.userAgent),firefox:!y&&r.firefox.test(E.userAgent),ie:!y&&r.ie.test(E.userAgent),ios:!y&&r.ios.test(E.userAgent),linux:!y&&r.linux.test(E.userAgent),mobile:function(){return!y&&(/blackberry|iphone|webos/i.test(E.userAgent)||r.android.test(E.userAgent)&&(720>this.client.size.height||720>this.client.size.width))},playbook:!y&&r.playbook.test(E.userAgent),opera:!y&&r.opera.test(E.userAgent),osx:!y&&r.osx.test(E.userAgent),safari:!y&&r.safari.test(E.userAgent.replace(/chrome.*/i,"")),
tablet:function(){return!y&&(/ipad|playbook|webos/i.test(E.userAgent)||r.android.test(E.userAgent)&&(720<=this.client.size.width||720<=this.client.size.width))},webos:!y&&r.webos.test(E.userAgent),windows:!y&&r.windows.test(E.userAgent),version:function(){var a=0;switch(!0){case this.chrome:a=E.userAgent.replace(/(.*chrome\/|safari.*)/gi,"");break;case this.firefox:a=E.userAgent.replace(/(.*firefox\/)/gi,"");break;case this.ie:a=w.parse(E.userAgent.replace(/(.*msie|;.*)/gi,""),10);z.documentMode<
a&&(a=z.documentMode);break;case this.opera:a=E.userAgent.replace(/(.*version\/|\(.*)/gi,"");break;case this.safari:a=E.userAgent.replace(/(.*version\/|safari.*)/gi,"");break;default:a=void 0!==E?E.appVersion:0}a=w.parse(m.trim(a));isNaN(a)&&(a=0);return a},allows:function(a,b){if(m.isEmpty(a)||m.isEmpty(b))throw Error(t.error.invalidArguments);a=h.parse(a).href;b=b.toLowerCase();var c=!1,c=0;B.get(a,!1)?(r.del.test(b)?c=1:r.get_headers.test(b)?c=4:r.put_post.test(b)?c=2:r.patch.test(b)&&(c=8),c=
Boolean(s.permissions(a,b).bit&c)):c=void 0;return c},bit:function(a){var b=0;g.each(a,function(a){switch(a.toLowerCase()){case "head":case "get":case "options":b|=4;break;case "post":case "put":b|=2;break;case "patch":b|=8;break;case "delete":b|=1}});return b},cors:function(a){return!y&&-1<a.indexOf("//")&&-1===a.indexOf("//"+N.host)},headers:function(a,b,c){a=m.trim(a.getAllResponseHeaders()).split("\n");var d={},e={},k=null,p=new Date,A=s.cors(b);g.each(a,function(a,c){var b,e;e=a.replace(r.header_value_replace,
"");b=a.replace(r.header_replace,"");b=m.unhyphenate(b,!0).replace(/\s+/g,"-");d[b]=e;if(null===k&&(!A&&r.allow.test(b)||A&&r.allow_cors.test(b)))k=e});switch(!0){case r.no.test(d["Cache-Control"]):case r.no.test(d.Pragma):break;case void 0!==d["Cache-Control"]&&r.number_present.test(d["Cache-Control"]):p=p.setSeconds(p.getSeconds()+w.parse(r.number_present.exec(d["Cache-Control"])[0],10));break;case void 0!==d.Expires:p=new Date(d.Expires);break;default:p=p.setSeconds(p.getSeconds()+u.expires)}e.expires=
p;e.headers=d;e.permission=s.bit(null!==k?m.explode(k):[c]);"get"===c&&(B.set(b,"expires",e.expires),B.set(b,"headers",e.headers),B.set(b,"permission",e.permission));return e},parse:function(a,b){b=b||"";var c;switch(!0){case (r.json_maybe.test(b)||m.isEmpty(b))&&r.json_wrap.test(a.responseText)&&Boolean(c=G.decode(a.responseText,!0)):case (r.json_maybe.test(b)||m.isEmpty(b))&&(c=r.jsonp_wrap.exec(a.responseText))&&null!==c&&Boolean(c=G.decode(c[2],!0)):break;case r.xml.test(b)&&m.isEmpty(a.responseText)&&
void 0!==a.responseXML&&null!==a.responseXML:c=P.decode(void 0!==a.responseXML.xml?a.responseXML.xml:a.responseXML);break;case r.is_xml.test(a.responseText):c=P.decode(a.responseText);break;default:c=a.responseText}return c},permissions:function(a){a=B.get(a,!1);a=!a?0:a.permission;var b={allows:[],bit:a,map:{partial:8,read:4,write:2,"delete":1,unknown:0}};a&1&&b.allows.push("DELETE");a&2&&(b.allows.push("POST"),b.allows.push("PUT"));a&4&&b.allows.push("GET");a&8&&b.allows.push("PATCH");return b},
jsonp:function(a,b,c,d){var e=x.factory(),k,p;void 0===da&&(void 0===D.abaaso&&h.define("abaaso.callback",{},D),da="abaaso");switch(!0){case void 0===d:case null===d:case d instanceof Object&&(null===d.callback||void 0===d.callback):case "string"===typeof d&&m.isEmpty(d):d="callback";break;case d instanceof Object&&void 0!==d.callback:d=d.callback;break;default:d="callback"}e.then(function(a){"function"===typeof b&&b(a)},function(a){"function"===typeof c&&c(a);throw a;});do k=h.genId().slice(0,10);
while(void 0!==D.abaaso.callback[k]);a=a.replace(d+"=?",d+"="+da+".callback."+k);D.abaaso.callback[k]=function(a){clearTimeout(h.timer[k]);delete h.timer[k];delete D.abaaso.callback[k];e.resolve(a);l.destroy(p)};p=l.create("script",{src:a,type:"text/javascript"},u("head")[0]);h.defer(function(){e.reject(void 0)},3E4,k);return e},request:function(a,b,c,d,e,k,p){p=p||3E4;var g,q,l,n,m,K,C,R,T,u;if(r.put_post.test(b)&&void 0===e)throw Error(t.error.invalidArguments);a=h.parse(a).href;b=b.toLowerCase();
k=k instanceof Object?k:null;g=s.cors(a);q=s.ie&&10>s.version&&g?new XDomainRequest:!s.ie||8<s.version||"patch"!==b?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e=(r.put_post.test(b)||r.patch.test(b))&&void 0!==e?e:null;l="get"===b?B.get(a):!1;n=b.capitalize();m=null;K="undefined"!==typeof Document;C="undefined"!==typeof ArrayBuffer;R="undefined"!==typeof Blob;T=x.factory();u=T.then(function(b){"function"===typeof c&&c.call(a,b,q);q=null},function(c){"function"===typeof d&&d.call(a,c,
q);q=null;throw c;});a.fire("before"+n);if(!g&&!r.get_headers.test(b)&&!1===s.allows(a,b))return q.status=405,T.reject(null),a.fire("failed"+n,null,q);if("get"===b&&Boolean(l))y&&(q.readyState=4,q.status=200,q._resheaders=l.headers),T.resolve(l.response),a.fire("afterGet",l.response,q);else{q["undefined"!==typeof q.onreadystatechange?"onreadystatechange":"onload"]=function(c){s.response(q,a,b,T)};try{void 0!==q.timeout&&(q.timeout=p)}catch(v){void 0}void 0!==q.ontimeout&&(q.ontimeout=function(c){a.fire("timeout"+
n,c,q)});void 0!==q.onprogress&&(q.onprogress=function(c){a.fire("progress"+n,c,q)});void 0!==q.upload&&void 0!==q.upload.onprogress&&(q.upload.onprogress=function(c){a.fire("progressUpload"+n,c,q)});q.open(b.toUpperCase(),a,!0);null!==k&&k.hasOwnProperty("Content-Type")&&(m=k["Content-Type"]);g&&null===m&&(m="text/plain");if(null!==e){e.hasOwnProperty("xml")&&(e=e.xml);K&&e instanceof Document&&(e=P.decode(e));"string"===typeof e&&r.is_xml.test(e)&&(m="application/xml");!(C&&e instanceof ArrayBuffer)&&
(!(R&&e instanceof Blob)&&e instanceof Object)&&(m="application/json",e=G.encode(e));if(null===m&&(C&&e instanceof ArrayBuffer||R&&e instanceof Blob))m="application/octet-stream";null===m&&(m="application/x-www-form-urlencoded; charset=UTF-8")}"undefined"!==typeof q.setRequestHeader&&("object"===typeof l&&l.headers.hasOwnProperty("ETag")&&q.setRequestHeader("ETag",l.headers.ETag),null===k&&(k={}),null!==m&&(k["Content-Type"]=m),k.hasOwnProperty("callback")&&delete k.callback,h.iterate(k,function(a,
c){null!==a&&"withCredentials"!==c&&q.setRequestHeader(c,a)}));"boolean"===typeof q.withCredentials&&(null!==k&&"boolean"===typeof k.withCredentials)&&(q.withCredentials=k.withCredentials);null!==e?q.send(e):q.send()}return u},response:function(a,b,c,d){var e=m.capitalize(c.toLowerCase()),k=null,p=s.ie&&void 0===a.readyState,g,q;g=function(a,c){d.reject(a);M(a,arguments,this,!0);b.fire("failed"+e,s.parse(c),c)};if(!p&&2===a.readyState)b.fire("received"+e,null,a);else if(!p&&4===a.readyState){switch(a.status){case 200:case 201:case 202:case 203:case 204:case 205:case 206:p=
s.headers(a,b,c);b.fire("headers",p.headers,a);if("head"===c)return d.resolve(p.headers),b.fire("afterHead",p.headers);if("options"===c)return d.resolve(p.headers),b.fire("afterOptions",p.headers);if("delete"!==c){if(r.http_body.test(a.status)&&(q=p.headers["Content-Type"]||"",q=s.parse(a,q),void 0===q))throw Error(t.error.serverError);"get"===c?B.set(b,"response",p.response=h.clone(q)):B.expire(b,!0)}else"delete"===c&&B.expire(b,!0);null!==F.getHeader()&&(Boolean(k=p.headers[F.getHeader()])&&F.current!==
k)&&F.setCurrent(F);switch(a.status){case 200:case 202:case 203:case 206:d.resolve(q);b.fire("after"+e,q,a);break;case 201:if((void 0===p.headers.Location||m.isEmpty(p.headers.Location))&&!m.isUrl(q))g(Error(t.error.invalidArguments),a);else{c=m.trim(p.headers.Location||q);s.request(c,"GET",function(c){d.resolve(c);b.fire("after"+e,c,a)},function(c){g(c,a)});break}case 204:d.resolve(null);b.fire("after"+e,null,a);break;case 205:d.resolve(null),b.fire("reset",null,a)}break;case 401:g(!y?Error(t.error.serverUnauthorized):
t.error.serverUnauthorized,a);break;case 403:B.set(b,"!permission",s.bit([c]));g(!y?Error(t.error.serverForbidden):t.error.serverForbidden,a);break;case 405:B.set(b,"!permission",s.bit([c]));g(!y?Error(t.error.serverInvalidMethod):t.error.serverInvalidMethod,a);break;default:g(!y?Error(t.error.serverError):t.error.serverError,a)}try{a.onreadystatechange=null}catch(l){void 0}}else p&&(q=s.parse(a),B.set(b,"permission",s.bit(["get"])),B.set(b,"response",q),d.resolve(q),b.fire("afterGet",q,a))},size:function(){var a=
!y?void 0!==z.documentElement?z.documentElement:z.body:{clientHeight:0,clientWidth:0};return{height:a.clientHeight,width:a.clientWidth}}},U={expire:function(a,b,c){void 0!==U.get(a)&&U.set(a,"","-1s",b,c);return a},get:function(a){return h.coerce(U.list()[a])},list:function(){var a={};void 0!==z.cookie&&!m.isEmpty(z.cookie)&&g.each(m.explode(z.cookie,";"),function(b){b=m.explode(b,"=");a[decodeURIComponent(b[0])]=decodeURIComponent(b[1])});return a},set:function(a,b,c,d,e){b=(b||"")+";";c=c||"";d=
"string"===typeof d?" domain="+d+";":"";e=!0===e?"; secure":"";var k="",p=null,g=null,q=["d","h","m","s"],l=RegExp(),n=q.length;if(!m.isEmpty(c)){for(;n--;)if(h.compile(l,q[n]),l.test(c)){g=q[n];p=w.parse(c,10);break}if(isNaN(p))throw Error(t.error.invalidArguments);k=new Date;switch(g){case "d":k.setDate(k.getDate()+p);break;case "h":k.setHours(k.getHours()+p);break;case "m":k.setMinutes(k.getMinutes()+p);break;case "s":k.setSeconds(k.getSeconds()+p)}}k instanceof Date&&(k=" expires="+k.toUTCString()+
";");z.cookie=m.trim(a.toString())+"="+b+k+d+" path=/"+e;return U.get(a)}},V={decorator:function(a,b,c){a=h.object(a);h.genId(a);"function"!==typeof a.fire&&n.decorate(a);a.data=new O(a);c instanceof Object&&h.merge(a.data,c);null!==b&&"object"===typeof b&&a.data.batch("set",b);return a},methods:{batch:function(a,b,c,d){a=a.toString().toLowerCase();c=!0===c;d=d||1E3;if(!r.set_del.test(a)||c&&r.del.test(a)||"object"!==typeof b)throw Error(t.error.invalidArguments);var e=this,k=!0===this.events,p=0,
A=b.length,q=!1,l=x.factory(),I,L,K,C,R,u;L=l.then(function(c){e.loaded=!0;r.del.test(a)&&e.reindex();e.autosave&&e.save();g.each(e.datalists,function(a){a.refresh(!0)});k&&n.fire(e.parentNode,"afterDataBatch",c)},function(a){k&&n.fire(e.parentNode,"failedDataBatch",a);throw a;});I=function(a){l.resolve(a)};K=function(a){l.reject(a)};C=function(a,c){var b=h.clone(a),d=x.factory(),k={};"function"!==typeof b.batch?k=b:h.iterate(b,function(a,c){g.contains(e.collections,c)||(k[c]=a)});null!==e.key&&void 0!==
k[e.key]&&(c=k[e.key],delete k[e.key]);d.then(function(a){++p===A&&I(e.records)},function(a){q||(q=!0,K(a))});k instanceof Array&&null!==e.uri?e.generate(c,void 0).then(function(a){d.resolve(a)},function(a){d.reject(a)}):e.set(c,k,!0).then(function(a){d.resolve(a)},function(a){d.reject(a)})};R=function(a){var c=x.factory();c.then(function(a){++p===A&&I(a);return a},function(a){q||(q=!0,K(a));return a});e.del(a,!1,!0).then(function(a){c.resolve(a)},function(a){c.reject(a)})};k&&n.fire(e.parentNode,
"beforeDataBatch",b);c&&this.clear(c);0===b.length?I([]):"set"===a?g.each(g.chunk(b,d),function(a,c){h.defer(function(){var c;g.each(a,function(a,b){if(g.contains(e.ignore,a)||g.contains(e.leafs,a))c=a,a={};"object"===typeof a?C(a,c||h.uuid()):-1===a.indexOf("//")?("/"!==a.charAt(0)?a=e.uri+"/"+a:null!==e.uri&&r.root.test(a)&&(u=h.parse(e.uri),a=u.protocol+"//"+u.host+a),b=a.replace(r.not_endpoint,""),m.isEmpty(b)||s.request(a,"GET",function(a){C(null===e.source?a:h.walk(a,e.source),b)},K,h.merge({withCredentials:e.credentials},
e.headers))):(b=a.replace(r.not_endpoint,""),m.isEmpty(b)||s.request(a,"GET",function(a){C(null===e.source?a:h.walk(a,e.source),b)},K,h.merge({withCredentials:e.credentials},e.headers)))})},c)}):g.each(b.sort(g.sort).reverse(),function(a){R(a)});return L},clear:function(a){var b=!0===this.events;!0===a?(this.collections=[],this.crawled=!1,this.keys={},this.loaded=!1,this.records=[],this.total=0,this.views={},g.each(this.datalists,function(a){a.refresh(!0,!0)})):(b&&n.fire(this.parentNode,"beforeDataClear"),
g.each(this.datalists,function(a){a.teardown(!0)}),this.autosave=!1,this.callback=null,this.collections=[],this.crawled=!1,this.credentials=null,this.datalists=[],this.depth=0,this.events=!0,this.expires=null,this.headers={Accept:"application/json"},this.ignore=[],this.key=null,this.keys={},this.leafs=[],this.loaded=!1,this.maxDepth=0,this.pointer=null,this.records=[],this.retrieve=this.recursive=!1,this.source=null,this.total=0,this.views={},this.uri=null,b&&n.fire(this.parentNode,"afterDataClear"));
return this},crawl:function(a){var b=this,c=!0===this.events,d=a instanceof Object?a:this.get(a),e=null===this.uri?"":this.uri,k=x.factory(),p=0,A=0,q,l,m;if(void 0===d)throw Error(t.error.invalidArguments);this.crawled=!0;a=k.then(function(a){return a});q=function(a,c){var b="";/\/\//.test(a)?b=a:"/"===a.charAt(0)&&"/"!==c.charAt(0)?(b=h.parse(c),b=b.protocol+"//"+b.host+a):b=a;return b};l=function(){++p===A&&k.resolve(A)};m=function(a,c){var b={};g.contains(c.collections,a)||c.collections.push(a);
b=V.decorator({id:d.key+"-"+a},null,{key:c.key,pointer:c.pointer,source:c.source,ignore:h.clone(c.ignore),leafs:h.clone(c.leafs),depth:c.depth+1,maxDepth:c.maxDepth});b.data.headers=h.merge(b.data.headers,c.headers);if(!g.contains(c.leafs,a)&&c.recursive&&c.retrieve&&(0===b.data.maxDepth||b.data.depth<b.data.maxDepth))b.data.recursive=!0,b.data.retrieve=!0;return b};h.iterate(d.data,function(a,k){var p;if(!g.contains(b.ignore,k)&&!g.contains(b.leafs,k)&&!(b.depth>=b.maxDepth||!(a instanceof Array)&&
"string"!==typeof a))if(A=g.cast(d.data).length,p=x.factory(),p.then(function(a){c&&n.fire(d.data[k],"afterDataRetrieve",a);l()},function(a){c&&n.fire(d.data[k],"failedDataRetrieve",a);l()}),a instanceof Array&&0<a.length)d.data[k]=m(k,b),"string"===typeof a[0]&&g.each(a,function(c,b){a[b]=q(c,e)}),d.data[k].data.batch("set",a,!0,void 0).then(function(a){p.resolve(a)},function(a){p.reject(a)});else if("/"===a.charAt(0)||-1<a.indexOf("//"))d.data[k]=m(k,b),a=q(a,e),d.data[k].data.setUri(a).then(function(a){p.resolve(a)},
function(a){p.reject(a)})});return a},del:function(a,b,c){if(void 0===a||!r.number_string.test(typeof a))throw Error(t.error.invalidArguments);b=!1!==b;c=!0===c;var d=this,e=!0===this.events,k=x.factory(),p,A,q,l,m;p=k.then(function(a){var b=d.get(a.record);d.records.remove(d.keys[a.key]);delete d.keys[a.key];d.total--;d.views={};h.iterate(b.data,function(a,c){null!==a&&void 0!==a.data&&"function"===typeof a.data.teardown&&a.data.teardown()});a.reindex&&d.reindex();c||(d.autosave&&d.save(),g.each(d.datalists,
function(a){a.del(b)}));e&&n.fire(d.parentNode,"afterDataDelete",b)},function(a){e&&n.fire(d.parentNode,"failedDataDelete",a);throw a;});if("string"===typeof a){if(A=a,a=this.keys[A],void 0===a)throw Error(t.error.invalidArguments);}else{A=this.records[a];if(void 0===A)throw Error(t.error.invalidArguments);A=A.key}q={key:A,record:a,reindex:b};!c&&(null===this.callback&&null!==this.uri)&&(l=this.uri+"/"+A,m=s.cors(l)||s.allows(l,"delete"));e&&n.fire(d.parentNode,"beforeDataDelete",q);c||null!==this.callback||
null===this.uri?k.resolve(q):r.true_undefined.test(m)?s.request(l,"DELETE",function(a){k.resolve(q)},function(a){k.reject(a)},h.merge({withCredentials:this.credentials},this.headers)):k.reject(q);return p},dump:function(a,b){a=a||this.records;var c=this;return a.map(b instanceof Array&&0<b.length?function(a){var e={};g.each(b,function(b){e[b]=b===c.key?a.key:!g.contains(c.collections,b)?h.clone(a.data[b]):a.data[b].data.uri});return e}:function(a){var b={};b[c.key]=a.key;h.iterate(a.data,function(a,
d){b[d]=!g.contains(c.collections,d)?h.clone(a):a.data.uri});return b})},find:function(a,b,c){if(void 0===a)throw Error(t.error.invalidArguments);var d=[],e=[],k=RegExp(),p="function"===typeof a;if(0===this.total)return d;p||(a="string"===typeof a?m.explode(a):[a],void 0===c||m.isEmpty(c)?c="gi":null===c&&(c=""));b="string"===typeof b?m.explode(b):null;null===b?g.each(this.records,function(b){p?!0===a(b)&&(e.push(b.key),d.push(b)):h.iterate(b.data,function(p,l){if(g.contains(e,b.key))return!1;null===
p||"object"===typeof p.data||g.each(a,function(a){h.compile(k,a,c);if(k.test(p))return e.push(b.key),d.push(b),!1})})}):g.each(this.records,function(A){g.each(b,function(b){if(g.contains(e,A.key))return!1;if(!(void 0===A.data[b]||"object"===typeof A.data[b].data))if(p){if(!0===a(A.data[b]))return e.push(A.key),d.push(A),!1}else g.each(a,function(a){h.compile(k,a,c);if(k.test(A.data[b]))return e.push(A.key),d.push(A),!1})})});return d},form:function(a,b,c){c=!1!==c;var d=null===a,e=this,k,p,A,q;d?
a=this.get(0):a instanceof Object||(a=this.get(a));if(void 0===a)throw Error(t.error.invalidArguments);if(null!==this.uri&&!s.cors(this.uri)&&!s.allows(this.uri,"post"))throw Error(t.error.serverInvalidMethod);A=a.key;q=a.data;void 0!==b&&(b=h.object(b));null!==this.uri?(a=this.uri.replace(r.not_endpoint,"").replace(/\?.*/,""),m.isDomain(a)&&(a=a.replace(/\..*/g,""))):a="record";k=function(a){var b=h.target(a).parentNode,d=u("#"+b.id+" input"),k=d[0].name.match(/(.*)\[/)[1],p=!0,q={};h.stop(a);c&&
(p=l.validate(b));switch(p){case !0:g.each(d,function(a){void 0!==a.type&&r.input_button.test(a.type)||h.define(a.name.replace("[",".").replace("]",""),a.value,q)}),e.set(A,q[k]).then(function(a){l.destroy(b)},function(a){l.destroy(b)})}};p=function(a,c,b){var e,k;h.iterate(a,function(a,h){a instanceof Array?(e=0,g.each(a,function(a){p(a,c,b+"["+h+"]["+e++ +"]")})):a instanceof Object?p(a,c,b+"["+h+"]"):(k=(b+"["+h+"]").replace(/\[|\]/g,""),c.create("label",{"for":k,innerHTML:m.capitalize(h)}),c.create("input",
{id:k,name:b+"["+h+"]",type:"text",value:d?"":a}))})};b=l.create("form",{style:"display:none;"},b);p(q,b,a);n.add(l.create("input",{type:"button",value:t.common.submit},b),"click",function(a){k(a)});l.create("input",{type:"reset",value:t.common.reset},b);l.css(b,"display","inherit");return b},generate:function(a,b){var c=this,d=x.factory(),e={},k=null,p,h,q,e={depth:this.depth+1,headers:this.headers,ignore:g.clone(this.ignore),leafs:g.clone(this.leafs),key:this.key,maxDepth:this.maxDepth,pointer:this.pointer,
recursive:this.recursive,retrieve:this.retrieve,source:this.source};p=d.then(function(a){return a},function(a){throw a;});h=function(){"object"===typeof b&&(k=b);if(0===e.maxDepth||e.depth<=e.maxDepth)c.records[q]=V.decorator({id:a},k,e),null===k&&(null!==c.uri&&(void 0===b&&!g.contains(c.leafs,a))&&(b=c.uri+"/"+a),void 0!==b?c.records[q].data.setUri(b).then(function(a){d.resolve(a)},function(a){d.reject(a)}):d.resolve(c.records[q].data.records))};void 0!==this.keys[a]?(q=this.keys[a],"function"===
typeof this.records[q].data.teardown&&this.records[q].data.teardown(),h()):this.set(a,{},!0).then(function(a){q=c.keys[a.key];c.collections.add(a.key);h()});return p},get:function(a,b){var c=this.records,d=typeof a,e=this,k;"undefined"===d||0===a.toString().length?k=c:"string"===d&&-1<a.indexOf(",")?(k=[],g.each(m.explode(a),function(a){isNaN(a)||(a=w.parse(a,10));k.push(e.get(a))})):"string"===d&&void 0!==this.keys[a]?k=c[this.keys[a]]:"number"===d&&void 0===b?k=c[w.parse(a,10)]:"number"===d&&"number"===
typeof b&&(k=c.limit(w.parse(a,10),w.parse(b,10)));return k},purge:function(a){return this.storage(a||this,"remove")},reindex:function(){var a=this.total,b=-1;this.views={};if(0<a)for(;++b<a;)this.records[b].index=b,this.keys[this.records[b].key]=b;return this},restore:function(a){return this.storage(a||this,"get")},save:function(a){return this.storage(a||this,"set")},select:function(a){if(!(a instanceof Object))throw Error(t.error.invalidArguments);return this.records.filter(function(b){var c=!0;
h.iterate(a,function(a,e){var k=typeof a;if("function"!==k&&b.data[e]!==a||"function"===k&&!a(b.data[e]))return c=!1});return c})},set:function(a,b,c){c=!0===c;var d=this,e=x.factory(),k=!1,p,l,q,m,I,L,K;if(!(b instanceof Object))throw Error(t.error.invalidArguments);l=e.then(function(a){var b=null,e=a.key,k=a.record,p=a.result,q=x.factory(),l,b=h.clone(a.data);q.then(function(a){d.retrieve&&d.crawl(a);c||(d.autosave&&d.save(),g.each(d.datalists,function(a){a.refresh()}));m&&n.fire(d.parentNode,"afterDataSet",
a)},function(a){m&&n.fire(d.parentNode,"failedDataSet",a);throw a;});d.views={};void 0!==e&&(k=d.get(e));if(void 0===k)if(a=d.total++,void 0===e&&(void 0===p&&(d.total--,q.reject(t.error.expectedObject)),null!==d.source&&(p=h.walk(p,d.source)),null===d.key?e=h.uuid():(e=p[d.key],delete p[d.key]),"string"!==typeof e&&(e=e.toString()),b=p),d.keys[e]=a,d.records[a]={key:e,data:{},index:a},l=d.records[a],null===d.pointer||void 0===b[d.pointer])l.data=b,null!==d.key&&l.data.hasOwnProperty(d.key)&&delete l.data[d.key],
q.resolve(l);else{b=b[d.pointer];if(void 0===b||null===b)delete d.records[a],delete d.keys[e],q.reject(t.error.expectedObject);l.data={};s.request(b,"GET",function(a){null!==d.source&&(a=h.walk(a,d.source));void 0!==a[d.key]&&delete a[d.key];l.data=a;q.resolve(l)},function(a){q.reject(a)},d.headers)}else l=d.records[d.keys[k.key]],l.data=b,q.resolve(l);return l},function(a){m&&n.fire(d.parentNode,"failedDataSet",a);throw a;});a instanceof Object&&(c=b,b=a,a=null);p=h.clone(b);null===a&&null===this.uri?
null===this.key||void 0===p[this.key]?a=h.uuid():(a=p[this.key],delete p[this.key]):null===a&&(a=void 0);if(p instanceof Array)return this.generate(a).then(function(){d.get(a).data.batch("set",p).then(function(a){e.resolve(a)},function(a){e.reject(a)})});b=void 0===a?void 0:this.get(a);q=void 0===a?"post":"put";m=!0===this.events;I={data:{},key:a,record:void 0};L=this.uri;if(!c&&null===this.callback&&null!==L){void 0!==b&&L.replace(r.not_endpoint,"")!==b.key&&(L+="/"+b.key);if("put"===q&&s.allows(L,
"patch")&&(!s.ie||8<s.version||s.activex))q="patch",K=k=!0;void 0===K&&(K=s.cors(L)||s.allows(L,q))}void 0!==b?(I.record=this.records[this.keys[b.key]],h.iterate(I.record.data,function(a,c){g.contains(d.ignore,c)||(I.data[c]=a)}),h.merge(I.data,p),k||(p=I.data)):I.data=p;m&&n.fire(d.parentNode,"beforeDataSet",{key:a,data:p});c||null!==this.callback||null===this.uri?e.resolve(I):r.true_undefined.test(K)?s.request(L,q.toUpperCase(),function(a){I.result=a;e.resolve(I)},function(a){e.reject(a)},p,h.merge({withCredentials:this.credentials},
this.headers)):e.reject(I);return l},setExpires:function(a){if(null!==a&&null===this.uri||null!==a&&(isNaN(a)||1E3>a))throw Error(t.error.invalidArguments);if(this.expires!==a){this.expires=a;var b=this.parentNode.id+"DataExpire",c=this;h.clearTimers(b);null!==a&&h.repeat(function(){if(null===c.uri)return c.setExpires(null),!1;B.expire(c.uri)||n.fire(c.uri,"beforeExpire, expire, afterExpire")},a,b,!1)}},setUri:function(a){var b=x.factory();if(null!==a&&m.isEmpty(a))throw Error(t.error.invalidArguments);
a=h.parse(a).href;this.uri===a?a=this.uri:(null!==this.uri&&n.remove(this.uri),a=this.uri=a,null!==a&&(n.add(a,"expire",function(){this.sync(!0)},"dataSync",this),B.expire(a,!0),this.sync(!0).then(function(a){b.resolve(a)},function(a){b.reject(a)})));return b},sort:function(a,b,c,d){if(void 0===a||m.isEmpty(a))throw Error(t.error.invalidArguments);r.sensitivity_types.test(c)||(c="ci");b=!0===b;var e=a.replace(/\s*asc/ig,"").explode().join(" ").toCamelCase()+c.toUpperCase();a=m.explode(a);var k=this.key,
p=[],l,q,n;g.each(a,function(a){if(m.isEmpty(a))throw Error(t.error.invalidArguments);});if(!b&&this.views[e]instanceof Array)return this.views[e];if(0===this.total)return[];n=function(a,c){var b=h.clone(a),d=a[0],e={},k=[];g.remove(b,0);e=l(d,c,r.desc.test(d));g.each(e.order,function(a){2>e.registry[a].length||0<b.length&&(e.registry[a]=n(b,e.registry[a]))});g.each(e.order,function(a){k=k.concat(e.registry[a])});return k};l=function(a,b,d){a=a.replace(/\s*asc/ig,"");var e=a.replace(r.desc,""),p=
k===e,h=[],l={};g.each(b,function(a){var b=p?a.key:a.data[e],b=null===b?"null":b.toString();switch(c){case "ci":b=m.toCamelCase(b);break;case "cs":b=m.trim(b);break;case "ms":b=m.trim(b).slice(0,1).toLowerCase()}l[b]instanceof Array||(l[b]=[],h.push(b));l[b].push(a)});h.sort(g.sort);d&&h.reverse();g.each(h,function(c){1!==l[c].length&&(l[c]=q(l[c],a,e,d,p))});return{order:h,registry:l}};q=function(a,c,b,d,e){var k=[],p=[];g.each(a,function(a,c){var d=e?a.key:a.data[b],d=m.trim(d.toString())+":::"+
c;k.push(d.replace(r.nil,'""'))});1<k.length&&(k.sort(g.sort),d&&k.reverse());g.each(k,function(c){p.push(a[r.sort_needle.exec(c)[1]])});return p};p=n(a,void 0===d?this.records:this.select(d));return this.views[e]=p},storage:function(a,b,c){var d=!1;c="session"===c&&"undefined"!==typeof sessionStorage;var e,k;if(!r.number_string_object.test(typeof a)||!r.get_remove_set.test(b))throw Error(t.error.invalidArguments);(d=r.number_string.test(a)||a.hasOwnProperty("key")&&!a.hasOwnProperty("parentNode"))&&
!(a instanceof Object)&&(a=this.get(a));k=d?a.key:a.parentNode.id;switch(b){case "get":e=c?sessionStorage.getItem(k):localStorage.getItem(k);if(null===e)throw Error(t.error.invalidArguments);e=G.decode(e);d?this.set(k,e,!0):h.merge(this,e);e=d?a:this;break;case "remove":c?sessionStorage.removeItem(k):localStorage.removeItem(k);e=this;break;case "set":a=G.encode(d?a.data:{total:this.total,keys:this.keys,records:this.records}),c?sessionStorage.setItem(k,a):localStorage.setItem(k,a),e=this}return e},
sync:function(a){if(null===this.uri||m.isEmpty(this.uri))throw Error(t.error.invalidArguments);a=!0===a;var b=this,c=!0===this.events,d=x.factory(),e=x.factory(),k,p,g;d.then(function(a){if("object"!==typeof a)throw Error(t.error.expectedObject);var c=!1,d;null!==b.source&&(a=h.walk(a,b.source));a instanceof Array?d=a:h.iterate(a,function(a){!c&&a instanceof Array&&(c=!0,d=a)});void 0===d&&(d=[a]);b.batch("set",d,!0,void 0).then(function(a){e.resolve(a)},function(a){e.reject(a)});return d},function(a){e.reject(a)});
k=e.then(function(d){a&&b.reindex();c&&n.fire(b.parentNode,"afterDataSync",d)},function(a){c&&n.fire(b.parentNode,"failedDataSync",a);throw a;});p=function(a){d.resolve(a)};g=function(a){d.reject(a)};c&&n.fire(b.parentNode,"beforeDataSync");null!==this.callback?s.jsonp(this.uri,p,g,{callback:this.callback}):s.request(this.uri,"GET",p,g,null,h.merge({withCredentials:this.credentials},this.headers));return k},teardown:function(){var a=this.uri,b;null!==a&&(B.expire(a,!0),n.remove(a),b=this.parentNode.id+
"DataExpire",h.clearTimers(b),g.each(this.datalists,function(a){a.teardown()}),g.each(this.records,function(c){B.expire(a+"/"+c.key,!0);n.remove(a+"/"+c.key);h.iterate(c.data,function(a,c){null!==a&&(a.hasOwnProperty("data")&&"function"===typeof a.data.teardown)&&(n.remove(a.id),a.data.teardown())})}));this.clear(!0);n.fire(this.parentNode,"afterDataTeardown");return this},unique:function(a){var b=[];g.each(this.records,function(c){g.add(b,c.data[a])});return b},update:function(a,b){var c=this.get(a),
d=this,e;if(void 0===c)throw Error(t.error.invalidArguments);c=h.merge(h.clone(c.data),b);e=x.factory();this.set(a,c).then(function(a){e.resolve(a)},function(a){M(a,arguments,d)});return e}}};O.prototype=V.methods;O.prototype.constructor=O;var S={factory:function(a,b,c,d){var e=[b];if(!(a instanceof Element)||"object"!==typeof b||!r.string_object.test(typeof c))throw Error(t.error.invalidArguments);a=l.create("ul",{"class":"list",id:b.parentNode.id+"-datalist"},a);c=new Z(a,e[0],c);d instanceof Object&&
h.merge(c,d);c.store.datalists.push(c);(null===c.store.uri||c.store.loaded)&&c.refresh(!0);return c},methods:{del:function(a){"number"===typeof this.pageIndex&&"number"===typeof this.pageSize?this.refresh():(n.fire(this.element,"beforeDataListRefresh"),g.each(this.element.find("> li[data-key='"+a.key+"']"),function(a){l.destroy(a)}),n.fire(this.element,"afterDataListRefresh"));return this},dump:function(){return this.store.dump(this.records)},page:function(a){if(isNaN(a))throw Error(t.error.invalidArguments);
this.pageIndex=a;this.refresh();return this},pages:function(){var a=this.element,b=this.pageIndex,c=this.pagination,d=this.pageRange,e=w.round(w.half(d),"down"),k=b-e,p=b+e,A=this,q=S.pages.call(this);if(!r.top_bottom.test(c))throw Error(t.error.invalidArguments);g.each(u("#"+a.id+"-pages-top, #"+a.id+"-pages-bottom"),function(a){void 0!==a&&l.destroy(a)});if(0===this.total||1===q)return this;1>k&&(e=w.diff(k,1),k+=e,p+=e);p>q&&(p=q,k=p-d+1,1>k&&(k=1));g.each(m.explode(c),function(c){var d=!1,d=1<
b,e=b+1<=q,g=!(b<q),m;m=l.create("ul",{"class":"list pages "+c,id:a.id+"-pages-"+c},a,"bottom"===c?"after":"before");l.create(d?"a":"span",{"class":"first page","data-page":1,innerHTML:"&lt;&lt;"},l.create("li",{},m));l.create(d?"a":"span",{"class":"prev page","data-page":b-1,innerHTML:"&lt;"},l.create("li",{},m));for(c=k;c<=p;c++)d=c===b,l.create(d?"span":"a",{"class":d?"current page":"page","data-page":c,innerHTML:c},l.create("li",{},m));l.create(e?"a":"span",{"class":"next page","data-page":e?
b+1:null,innerHTML:"&gt;"},l.create("li",{},m));l.create(g?"span":"a",{"class":"last page","data-page":g?null:q,innerHTML:"&gt;&gt;"},l.create("li",{},m));n.remove(m,"click");n.add(m,"click",function(a){var c=h.target(a);h.stop(a);"A"===c.nodeName&&(A.page(l.data(c,"page")),window.scrollTo(0,0))},"pagination")});return this},refresh:function(a,b){a=!1!==a;b=!0===b;var c=this.element,d="object"===typeof this.template;!d&&this.template.toString().replace(/\{\{|\}\}/g,"");var e=[],k=[],p=this,A="function"===
typeof this.callback,q=RegExp(),s=[],e=[],t;n.fire(c,"beforeDataListRefresh");t=d?function(a){var c=G.encode(p.template),b=g.unique(c.match(/\{\{[\w\.]+\}\}/g)),c=c.replace("{{"+p.store.key+"}}",a.key);g.each(b,function(b){var d=b.replace(/\{\{|\}\}/g,""),d=h.walk(a.data,d);q.compile(b,"g");c=c.replace(q,G.encode(d).replace(/(^")|("$)/g,""))});c=G.decode(c.replace(/\{\{.*\}\}/g,p.placeholder));return{li:c}}:function(a){var c=p.template,b=g.unique(c.match(/\{\{[\w\.]+\}\}/g)),c=c.replace("{{"+p.store.key+
"}}",a.key);g.each(b,function(b){var d=b.replace(/\{\{|\}\}/g,""),d=h.walk(a.data,d);q.compile(b,"g");c=c.replace(q,d)});c=c.replace(/\{\{.*\}\}/g,p.placeholder);return{li:c}};e=null===this.where?m.isEmpty(this.order)?this.store.get():this.store.sort(this.order,b,this.sensitivity):m.isEmpty(this.order)?this.store.select(this.where):this.store.sort(this.order,b,this.sensitivity,this.where);g.each(e,function(a){null===p.filter||!(p.filter instanceof Object)?k.push({key:a.key,template:t(a)}):h.iterate(p.filter,
function(c,b){var d,e;g.contains(s,a.key)||(c=m.explode(c),d=RegExp(),e=b===p.store.key,g.each(c,function(c){h.compile(d,c,"i");if(e&&d.test(a.key)||void 0!==a.data[b]&&d.test(a.data[b]))return s.push(a.key),k.push({key:a.key,template:t(a)}),!1}))})});this.records=k;this.total=k.length;if("number"===typeof this.pageIndex&&"number"===typeof this.pageSize){d=S.pages.call(this);if(0<d&&this.pageIndex>d)return this.page(d);0<this.total&&(e=S.range.call(this),k=k.limit(e[0],e[1]))}a?(l.clear(c),0===this.total?
l.create("li",{innerHTML:this.emptyMsg},c):g.each(k,function(a){var b=h.tpl(a.template,c);l.data(b,"key",a.key);A&&p.callback(b)})):(g.each(l.find(c,"> li"),function(a){l.addClass(a,"hidden")}),g.each(k,function(a){g.each(l.find(c,"> li[data-key='"+a.key+"']"),function(a){l.removeClass(a,"hidden")})}));r.top_bottom.test(this.pagination)&&"number"===typeof this.pageIndex&&"number"===typeof this.pageSize?this.pages():g.each(u("#"+c.id+"-pages-top, #"+c.id+"-pages-bottom"),function(a){l.destroy(a)});
n.fire(c,"afterDataListRefresh");return this},sort:function(a,b,c){if("string"!==typeof a)throw Error(t.error.invalidArguments);this.element.fire("beforeDataListSort");this.order=a;this.sensitivity=b||"ci";this.refresh(!0,c);this.element.fire("afterDataListSort");return this},teardown:function(a){a=!0===a;var b=this,c=this.element.id;n.remove(c);g.each(u("#"+c+"-pages-top, #"+c+"-pages-bottom"),function(a){n.remove(a)});g.each(this.store.datalists,function(a,c){if(a.id===b.id)return this.remove(c),
!1});a&&(l.destroy(this.element),this.element=null);return this}},pages:function(){if(isNaN(this.pageSize))throw Error(t.error.invalidArguments);return w.round(this.total/this.pageSize,"up")},range:function(){return[this.pageIndex*this.pageSize-this.pageSize,this.pageSize]}};Z.prototype=S.methods;Z.prototype.constructor=Z;$.prototype={always:function(a){if("function"!==typeof a)throw Error(t.error.invalidArguments);if(this.promise.resolved())throw Error(t.error.promiseResolved.replace("{{outcome}}",
this.promise.outcome));this.onAlways.push(a);return this},done:function(a){if("function"!==typeof a)throw Error(t.error.invalidArguments);if(this.promise.resolved())throw Error(t.error.promiseResolved.replace("{{outcome}}",this.promise.outcome));this.onDone.push(a);return this},fail:function(a){if("function"!==typeof a)throw Error(t.error.invalidArguments);if(this.promise.resolved())throw Error(t.error.promiseResolved.replace("{{outcome}}",this.promise.outcome));this.onFail.push(a);return this},isRejected:function(){return this.promise.state===
x.state.broken},isResolved:function(){return this.promise.state===x.state.resolved},reject:function(a){this.promise.reject.call(this.promise,a);return this},resolve:function(a){this.promise.resolve.call(this.promise,a);return this}};$.prototype.constructor=$;var l={attr:function(a,b,c){if(r.svg.test(a.namespaceURI))void 0===c?(c=a.getAttributeNS(a.namespaceURI,b),null===c||m.isEmpty(c)||h.coerce(c)):a.setAttributeNS(a.namespaceURI,b,c);else{"string"===typeof c&&(c=m.trim(c));if(r.checked_disabled.test(b)&&
void 0===c)return h.coerce(a[b]);if(r.checked_disabled.test(b)&&void 0!==c)a[b]=c;else{if("SELECT"===a.nodeName&&"selected"===b&&void 0===c)return u("#"+a.id+' option[selected="selected"]')[0]||u("#"+a.id+" option")[0];if("SELECT"===a.nodeName&&"selected"===b&&void 0!==c)b=u("#"+a.id+' option[selected="selected"]')[0],void 0!==b&&(b.selected=!1,b.removeAttribute("selected")),b=u("#"+a.id+' option[value="'+c+'"]')[0],b.selected=!0,b.setAttribute("selected","selected");else{if(void 0===c)return c=a.getAttribute(b),
c=null===c||m.isEmpty(c)?void 0:h.coerce(c);a.setAttribute(b,c)}}}return a},clear:function(a){"function"===typeof a.reset?a.reset():void 0!==a.value?l.update(a,{innerHTML:"",value:""}):l.update(a,{innerHTML:""});return a},create:function(a,b,c,d){var e=!1,k;if(void 0===a||m.isEmpty(a))throw Error(t.error.invalidArguments);void 0!==c?(c=h.object(c),e=void 0!==c.namespaceURI&&r.svg.test(c.namespaceURI)):void 0!==b&&("string"===typeof b||void 0!==b.childNodes)?(c=h.object(b),e=void 0!==c.namespaceURI&&
r.svg.test(c.namespaceURI)):c=z.body;if(void 0===c)throw Error(t.error.invalidArguments);k=void 0!==b&&"string"!==typeof b&&void 0===b.childNodes&&void 0!==b.id&&void 0===u("#"+b.id)?b.id:!e?h.genId(void 0,!0):void 0;void 0!==b&&void 0!==b.id&&delete b.id;a=!e&&!r.svg.test(a)?z.createElement(a):z.createElementNS("http://www.w3.org/2000/svg",a);void 0!==k&&(a.id=k);"object"===typeof b&&void 0===b.childNodes&&l.update(a,b);void 0===d||"last"===d?c.appendChild(a):"first"===d?l.prependChild(c,a):"after"===
d?(d={},d.after=c,c=c.parentNode,c.insertBefore(a,d.after.nextSibling)):void 0!==d.after?c.insertBefore(a,d.after.nextSibling):"before"===d?(d={},d.before=c,c=c.parentNode,c.insertBefore(a,d.before)):void 0!==d.before?c.insertBefore(a,d.before):c.appendChild(a);return a},css:function(a,b,c){a=h.object(a);b=m.toCamelCase(b);void 0!==c?a.style[b]=c:a=a.style[b];return a},data:function(a,b,c){var d="object"===typeof a.dataset;d&&(b=m.toCamelCase(b));void 0!==c?d?a.dataset[b]=c:l.attr(a,"data-"+b,c):
a=h.coerce(d?a.dataset[b]:l.attr(a,"data-"+b));return a},destroy:function(a){n.remove(a);null!==a.parentNode&&a.parentNode.removeChild(a)},disable:function(a){"boolean"===typeof a.disabled&&!a.disabled&&(a.disabled=!0);return a},dispatch:function(){return"function"===typeof CustomEvent?function(a,b,c,d,e){var k=new CustomEvent(b);k.initCustomEvent(b,!1!==d,!1!==e,c||{});a.dispatchEvent(k);return a}:void 0!==z&&"function"===typeof z.createEvent?function(a,b,c,d,e){var k=z.createEvent("HTMLEvents");
k.initEvent(b,!1!==d,!1!==e);k.detail=c||{};a.dispatchEvent(k);return a}:void 0!==z&&"object"===typeof z.createEventObject?function(a,b,c,d,e){e=z.createEventObject();e.cancelBubble=!1!==d;e.detail=c||{};a.fireEvent("on"+b,e)}:function(){throw Error(t.error.notSupported);}}(),enable:function(a){"boolean"===typeof a.disabled&&a.disabled&&(a.disabled=!1);return a},find:function(a,b){var c=[];h.genId(a,!0);g.each(m.explode(b),function(b){c=c.concat(u("#"+a.id+" "+b))});return c},has:function(a,b){var c=
l.find(a,b);return!isNaN(c.length)&&0<c.length},hasClass:function(a,b){return a.classList.contains(b)},hide:function(a){"boolean"===typeof a.hidden?a.hidden=!0:(a["data-display"]=a.style.display,a.style.display="none");return a},hidden:function(a){return"none"===a.style.display||"boolean"===typeof a.hidden&&a.hidden},html:function(a,b){return void 0===b?m.trim(a.innerHTML):l.update(a,{innerHTML:m.trim(b)})},is:function(a,b){return/^:/.test(b)?g.contains(l.find(a.parentNode,a.nodeName.toLowerCase()+
b),a):RegExp(b,"i").test(a.nodeName)},isAlphaNum:function(a){return"FORM"===a.nodeName?!1:J.test({alphanum:a.value||l.text(a)}).pass},isBoolean:function(a){return"FORM"===a.nodeName?!1:J.test({"boolean":a.value||l.text(a)}).pass},isChecked:function(a){return"INPUT"!==a.nodeName?!1:l.attr(a,"checked")},isDate:function(a){return"FORM"===a.nodeName?!1:m.isDate(a.value||l.text(a))},isDisabled:function(a){return"INPUT"!==a.nodeName?!1:l.attr(a,"disabled")},isDomain:function(a){return"FORM"===a.nodeName?
!1:m.isDomain(a.value||l.text(a))},isEmail:function(a){return"FORM"===a.nodeName?!1:m.isEmail(a.value||l.text(a))},isEmpty:function(a){return"FORM"===a.nodeName?!1:m.isEmpty(a.value||l.text(a))},isIP:function(a){return"FORM"===a.nodeName?!1:m.isIP(a.value||l.text(a))},isInt:function(a){return"FORM"===a.nodeName?!1:m.isInt(a.value||l.text(a))},isNumber:function(a){return"FORM"===a.nodeName?!1:m.isNumber(a.value||l.text(a))},isPhone:function(a){return"FORM"===a.nodeName?!1:m.isPhone(a.value||l.text(a))},
isUrl:function(a){return"FORM"===a.nodeName?!1:m.isUrl(a.value||l.text(a))},klass:function(a,b,c){c=!1!==c;b=m.explode(b," ");c?g.each(b,function(c){a.classList.add(c)}):g.each(b,function(c){if("*"!==c)a.classList.remove(c);else return g.each(a.classList,function(a){this.remove(a)}),!1});return a},position:function(a){var b,c,d,e;b=c=0;e=a.offsetWidth;d=a.offsetHeight;if(a.offsetParent){c=a.offsetTop;for(b=a.offsetLeft;a=a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop}return{top:c,right:z.documentElement.clientWidth-
(b+e),bottom:z.documentElement.clientHeight+D.scrollY-(c+d),left:b}},prependChild:function(a,b){return 0===a.childNodes.length?a.appendChild(b):a.insertBefore(b,a.childNodes[0])},removeAttr:function(a,b){var c;r.svg.test(a.namespaceURI)?a.removeAttributeNS(a.namespaceURI,b):"SELECT"===a.nodeName&&"selected"===b?(c=u("#"+a.id+' option[selected="selected"]')[0],void 0!==c&&(c.selected=!1,c.removeAttribute("selected"))):a.removeAttribute(b);return a},serialize:function(a,b,c){a=h.object(a);b=!0===b;
c=!1!==c;var d=[],e={},k;a instanceof Array?g.each(a,function(a){d.push(h.object(a))}):d="FORM"===a.nodeName?void 0!==a.elements?g.cast(a.elements):a.find("button, input, select, textarea"):[a];g.each(d,function(a){"FORM"===a.nodeName?h.merge(e,G.decode(l.serialize(a))):void 0===e[a.name]&&(e[a.name]=l.val(a))});b?(k="",h.iterate(e,function(a,b){c?k+="&"+encodeURIComponent(b)+"="+encodeURIComponent(a):k+="&"+b+"="+a}),k=k.replace(/^&/,"?")):k=G.encode(e);return k},show:function(a){"boolean"===typeof a.hidden?
a.hidden=!1:a.style.display=l.data(a,"display")||"inherit";return a},size:function(a){var b=function(a){return w.parse(a,10)};return{height:a.offsetHeight+b(a.style.paddingTop||0)+b(a.style.paddingBottom||0)+b(a.style.borderTop||0)+b(a.style.borderBottom||0),width:a.offsetWidth+b(a.style.paddingLeft||0)+b(a.style.paddingRight||0)+b(a.style.borderLeft||0)+b(a.style.borderRight||0)}},text:function(a,b){var c=void 0!==a.textContent?"textContent":"innerText",d={},e=!1;"undefined"!==typeof b&&(e=!0,d[c]=
b);return e?l.update(a,d):a[c]},toggleClass:function(a,b){a.classList.toggle(b);return a},update:function(a,b){b=b||{};h.iterate(b,function(c,b){if(r.element_update.test(b))a[b]=c;else if("class"===b)!m.isEmpty(c)?l.klass(a,c):l.klass(a,"*",!1);else if(0===b.indexOf("data-"))l.data(a,b.replace("data-",""),c);else if("id"===b){var e=n.listeners;void 0!==e[a.id]&&(e[b]=h.clone(e[a.id]),delete e[a.id])}else l.attr(a,b,c)});return a},val:function(a,b){var c="input",d;if(void 0===b){if(r.radio_checkbox.test(a.type)){if(m.isEmpty(a.name))throw Error(t.error.expectedProperty);
g.each(u("input[name='"+a.name+"']"),function(a){if(a.checked)return d=a.value,!1})}else d=r.select.test(a.type)?a.options[a.selectedIndex].value:a.value||l.text(a);void 0!==d&&(d=h.coerce(d));"string"===typeof d&&(d=m.trim(d))}else b=b.toString(),r.radio_checkbox.test(a.type)?(c="click",g.each(u("input[name='"+a.name+"']"),function(a){if(a.value===b)return a.checked=!0,d=a,!1})):r.select.test(a.type)?(c="change",g.each(l.find(a,"> *"),function(a){if(a.value===b)return a.selected=!0,d=a,!1})):void 0!==
a.value?a.value=b:l.text(a,b),l.dispatch(a,c),d=a;return d},validate:function(a){return"FORM"===a.nodeName?J.test(a):!m.isEmpty(a.value||l.text(a))}},ea={factory:function(a,b,c,d){d=d||250;var e=[b];if(!(a instanceof Element)||void 0!==b&&void 0===b.store||"string"!==typeof c||m.isEmpty(c))throw Error(t.error.invalidArguments);return(new aa(a,e[0],d)).set(c).init()},methods:{init:function(){n.add(this.element,"keyup",this.update,"filter",this);n.add(this.element,"input",this.update,"value",this);
return this},set:function(a){var b={};if("string"!==typeof a||m.isEmpty(a))throw Error(t.error.invalidArguments);g.each(m.explode(a),function(a){b[a]=""});this.filters=b;return this},teardown:function(){n.remove(this.element,"keyup","filter");n.remove(this.element,"input","value");return this},update:function(a){var b=this;h.defer(function(){var a=l.val(b.element);m.isEmpty(a)?b.datalist.filter=null:(h.iterate(b.filters,function(b,e){var k=m.explode(a),k=k.filter(function(a){return!m.isEmpty(a)});
g.each(k,function(a,c){this[c]="^"+m.escape(a).replace("\\*",".*")});this[e]=k.join(",")}),b.datalist.filter=b.filters);b.datalist.pageIndex=1;b.datalist.refresh(!0,1<b.datalist.store.datalists.length)},this.debounce,this.element.id+"Debounce");return this}}};aa.prototype=ea.methods;aa.prototype.constructor=aa;ba.prototype={dump:function(){return this.store.dump(this.list.records,this.fields)},init:function(a){var b,c,d,e,k,p,h,q;this.initialized||(b=this,c=[],d="",e=l.create("section",{"class":"grid"},
this.element),k=l.create("ul",{"class":"header"},e),p=100/this.fields.length+"%",h="display:inline-block;width:"+p,q=m.explode(this.options.order),g.each(this.fields,function(a){var c=k.create("span",{innerHTML:m.capitalize(m.unCamelCase(a),!0),style:h,"class":a,"data-field":a});b.sortable.contains(a)&&(l.klass(c,"sortable",!0),0<q.filter(function(c){return 0===c.indexOf(a)}).length&&l.data(c,"sort",g.contains(q,a+" desc")?"desc":"asc"));d+='<span class="'+a+'" data-field="'+a+'" style="'+h+'">{{'+
a+"}}</span>"}),0<this.sortable.length&&n.add(k,"click",this.sort,"sort",this),c.push(S.factory(e,this.store,d,this.options)),this.list=c[0],!0===this.filtered&&(c.push(ea.factory(l.create("input",{"class":"filter"},e,"first"),c[0],this.fields.join(","),a||250)),this.filter=c[1]),this.initialized=!0);return this},refresh:function(){var a=[],b=this;0<this.sortOrder.length&&(g.each(this.sortOrder,function(c){var d=l.find(b.element,".header span[data-field='"+c+"']")[0];a.push(c+" "+l.data(d,"sort"))}),
this.list.order=a.join(", "));this.list.refresh();return this},sort:function(a){var b=h.target(a);h.stop(a);l.hasClass(b,"sortable")&&(a=l.data(b,"field"),l.data(b,"sort","asc"===l.data(b,"sort")?"desc":"asc"),g.remove(this.sortOrder,a),this.sortOrder.splice(0,0,a),this.refresh());return this},teardown:function(){null!==this.filter&&this.filter.teardown();this.list.teardown();n.remove(l.find(this.element,".header")[0],"click","sort");l.destroy(l.find(this.element,".grid")[0]);return this}};ba.prototype.constructor=
ba;var G={csv:function(a,b,c){b=b||",";c=!1!==c;a=G.decode(a,!0)||a;var d="",e;e=function(a){var c;a instanceof Array?(c='"'+a.toString()+'"',r.object_type.test(c)&&(c='"'+G.csv(a,b)+'"')):c=a instanceof Object?'"'+G.csv(a,b)+'"':r.csv_quote.test(a)?'"'+a.replace(/\n/g," ").replace(/"/g,'""')+'"':a;return c};a instanceof Array?(c&&(d=g.keys(a[0]).join(b)+"\n"),d+=a.map(function(a){return G.csv(a,b,!1)}).join("\n")):(c&&(d=g.keys(a).join(b)+"\n"),d+=g.cast(a).map(e).join(b)+"\n");return d.replace(/\n$/,
"")},decode:function(a,b){try{return JSON.parse(a)}catch(c){!0!==b&&M(c,arguments,this)}},encode:function(a,b){try{return JSON.stringify(a)}catch(c){!0!==b&&M(c,arguments,this)}}},t={common:{back:"Back",cancel:"Cancel",clear:"Clear",close:"Close",cont:"Continue",create:"Create",del:"Delete",edit:"Edit",find:"Find",gen:"Generate",go:"Go",loading:"Loading",next:"Next",login:"Login",ran:"Random",reset:"Reset",save:"Save",search:"Search",submit:"Submit"},day:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",
4:"Thursday",5:"Friday",6:"Saturday"},error:{databaseNotOpen:"Failed to open the Database, possibly exceeded Domain quota",databaseNotSupported:"Client does not support local database storage",databaseWarnInjection:"Possible SQL injection in database transaction, use the &#63; placeholder",elementNotCreated:"Could not create the Element",elementNotFound:"Could not find the Element",expectedArray:"Expected an Array",expectedArrayObject:"Expected an Array or Object",expectedBoolean:"Expected a Boolean value",
expectedNumber:"Expected a Number",expectedProperty:"Expected a property, and it was not set",expectedObject:"Expected an Object",invalidArguments:"One or more arguments is invalid",invalidDate:"Invalid Date",invalidFields:"The following required fields are invalid: ",invalidRoute:"The route could not be found",invalidStateNoHeaders:"INVALID_STATE_ERR: Headers have not been received",invalidStateNoSync:"Synchronous XMLHttpRequest requests are not supported",invalidStateNotOpen:"INVALID_STATE_ERR: Object is not open",
invalidStateNotSending:"INVALID_STATE_ERR: Object is sending",invalidStateNotUsable:"INVALID_STATE_ERR: Object is not usable",notAvailable:"Requested method is not available",notSupported:"This feature is not supported by this platform",propertyNotFound:"Could not find the requested property",promisePending:"The promise cannot be resolved while pending result",promiseResolved:"The promise has been resolved: {{outcome}}",serverError:"Server error has occurred",serverForbidden:"Forbidden to access URI",
serverInvalidMethod:"Method not allowed",serverUnauthorized:"Authorization required to access URI",readOnly:"Property is read only",upgrade:"Your browser is too old to use abaaso, please upgrade"},month:{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}},W={enabled:!1,log:!1,diff:{x:null,y:null},pos:{x:null,y:null},prev:{x:null,y:null},view:function(){return s.ie&&9>s.version?"documentElement":"body"},track:function(a){var b=
W;if("object"===typeof a){var c=z[b.view],d=a.pageX?a.pageX:c.scrollLeft+a.clientX;a=a.pageY?a.pageY:c.scrollTop+a.clientY;c=!1;b.pos.x!==d&&(c=!0);u.mouse.prev.x=b.prev.x=w.parse(b.pos.x,10);u.mouse.pos.x=b.pos.x=d;u.mouse.diff.x=b.diff.x=b.pos.x-b.prev.x;b.pos.y!==a&&(c=!0);u.mouse.prev.y=b.prev.y=w.parse(b.pos.y,10);u.mouse.pos.y=b.pos.y=a;u.mouse.diff.y=b.diff.y=b.pos.y-b.prev.y;c&&b.log&&h.log([b.pos.x,b.pos.y,b.diff.x,b.diff.y])}else"boolean"===typeof a&&(a?n.add(z,"mousemove",W.track,"tracking"):
n.remove(z,"mousemove","tracking"),u.mouse.enabled=b.enabled=a);return b}},w={diff:function(a,b){if(isNaN(a)||isNaN(b))throw Error(t.error.expectedNumber);return Math.abs(a-b)},even:function(a){return 0===a%2},format:function(a,b,c){if(isNaN(a))throw Error(t.error.expectedNumber);a=a.toString();b=b||",";c=c||3;var d=-1<a.indexOf(".")?"."+a.replace(r.number_format_1,""):"";a=a.replace(r.number_format_2,"").split("").reverse();var e=Math.floor(a.length/c),k=1,g,h;for(h=0;h<e;h++)g=1===k?c:c*k+(2===
k?1:k-1),a.splice(g,0,b),k++;a=a.reverse().join("");a.charAt(0)===b&&(a=a.substring(1));return a+d},half:function(a,b){return void 0!==b?0.5===a/b:a/2},odd:function(a){return!w.even(a)},parse:function(a,b){return void 0===b?parseFloat(a):parseInt(a,b)},random:function(a){a=a||100;return Math.floor(Math.random()*(a+1))},round:function(a,b){a=w.parse(a);return void 0===b||m.isEmpty(b)?w.parse(a.toFixed(0)):Math[!r.down.test(b)?"ceil":"floor"](a)}},n={listeners:{},alisteners:{},elisteners:{},clisteners:{},
log:!1,queue:[],silent:!1,ignore:!1,add:function(a,b,c,d,e,k){a=h.object(a);e=e||a;k=k||F.getCurrent();if(a instanceof Array)return g.each(a,function(a){n.add(a,b,c,d,e,k)});void 0!==b&&(b=m.explode(b));d=d||h.genId();var p=null,l=n.listeners,q=n.alisteners,s=n.elisteners,u=n.clisteners,v=r.observer_globals,x=r.observer_allowed,C=n.id(a);F.getCurrent();var w,y;if(void 0===C||null===b||void 0===b||"function"!==typeof c)throw Error(t.error.invalidArguments);void 0===l[C]&&(l[C]={},q[C]={},u[C]={});
g.each(b,function(b){var g=C+"_"+b;void 0===l[C][b]&&(l[C][b]={},q[C][b]={},u[C][b]=0);void 0===l[C][b][k]&&(l[C][b][k]={},q[C][b][k]=[]);p=v.test(C)||!/\//g.test(C)&&"abaaso"!==C?a:null;if(null!==p&&void 0!==p&&"afterjsonp"!==b.toLowerCase()&&void 0===s[g]&&(v.test(C)||"function"===typeof p.listeners))if(w="function"===typeof p.addEventListener,y="object"===typeof p.attachEvent||w)s[g]=function(c){x.test(c.type)||h.stop(c);n.fire(a,b,c)},p[w?"addEventListener":"attachEvent"]((w?"":"on")+b,s[g],!1);
l[C][b][k][d]={fn:c,scope:e};n.sync(C,b,k);u[C][b]++});return a},decorate:function(a){g.each([["fire",function(){return n.fire.apply(n,[this].concat(g.cast(arguments)))}],["listeners",function(a){return n.list(this,a)}],["on",function(a,c,d,e,k){return n.add(this,a,c,d,e,k)}],["once",function(a,c,d,e,k){return n.once(this,a,c,d,e,k)}],["un",function(a,c){return n.remove(this,a,c)}]],function(b){h.property(a,b[0],{value:b[1],configurable:!0,enumerable:!0,writable:!0})});return a},discard:function(a){return void 0===
a?n.ignore:n.ignore=!0===a},fire:function(a,b){a=h.object(a);var c=!1,d=g.cast(arguments).remove(0,1),e,k,p,l;if(n.ignore)return a;if(a instanceof Array)return g.each(a,function(a){d=[a,b].concat(d);n.fire.apply(n,d)}),a;e=n.id(a);if(void 0===e||void 0===b)throw Error(t.error.invalidArguments);n.silent?n.queue.push({obj:a,event:b}):(k=F.getCurrent(),p=u.logging,g.each(m.explode(b),function(b){p&&h.log(e+" firing "+b);l=n.list(a,b,n.alisteners);void 0!==l.all&&g.each(l.all,function(a){a=a.fn.apply(a.scope,
d);if(!1===a)return c=!0,a});!c&&("all"!==k&&void 0!==l[k])&&g.each(l[k],function(a){return a.fn.apply(a.scope,d)})}));return a},id:function(a){a===H?a="abaaso":a===D?a="window":!y&&a===z?a="document":!y&&a===z.body?a="body":(h.genId(a),a=a.id||("function"===typeof a.toString?a.toString():a));return a},list:function(a,b,c){a=h.object(a);c=c||n.listeners;a=n.id(a);return void 0===c[a]&&void 0===b?{}:void 0!==c[a]&&(void 0===b||m.isEmpty(b))?c[a]:void 0!==c[a]&&void 0!==c[a][b]?c[a][b]:{}},once:function(a,
b,c,d,e,k){var p=d||h.genId();a=h.object(a);e=e||a;k=k||F.getCurrent();if(void 0===a||null===b||void 0===b||"function"!==typeof c)throw Error(t.error.invalidArguments);if(a instanceof Array)return g.each(a,function(a){n.once(a,b,c,d,e,k)}),a;n.add(a,b,function(){c.apply(e,arguments);n.remove(a,b,p,k)},p,e,k);return a},pause:function(a){!0===a?n.silent=a:!1===a&&(n.silent=a,g.each(n.queue,function(a){n.fire(a.obj,a.event)}),n.queue=[]);return a},remove:function(a,b,c,d){a=h.object(a);d=d||F.getCurrent();
if(a instanceof Array)return g.each(a,function(a){n.remove(a,b,c,d)});var e=n.listeners,k=n.alisteners,p=n.elisteners,l=n.clisteners,q=n.id(a),s="function"===typeof a.addEventListener,t="object"===typeof a.attachEvent||s,u;u=function(c,b){if("number"===typeof b&&0===(l[q][c]-=b)&&t)a[s?"removeEventListener":"detachEvent"]((s?"":"on")+c,p[q+"_"+c],!1),delete p[q+"_"+c]};if(void 0===e[q])return a;void 0===b||null===b?((r.observer_globals.test(q)||"function"===typeof q.listeners)&&h.iterate(p,function(a,
c){0===c.indexOf(q+"_")&&u(c.replace(/.*_/,""),1)}),delete e[q],delete k[q],delete l[q]):g.each(m.explode(b),function(a){var b=!1;void 0!==e[q][a]&&(void 0===c?((r.observer_globals.test(q)||"function"===typeof q.listeners)&&u(a,g.keys(e[q][a][d]).length),e[q][a][d]={},b=!0):void 0!==e[q][a][d][c]&&(u(a,1),delete e[q][a][d][c],b=!0),b&&n.sync(q,a,d))});return a},sum:function(a){var b={};void 0!==a?(a=h.object(a),a=n.id(a),b=h.clone(n.clisteners[a])):b=h.clone(n.clisteners);return b},sync:function(a,
b,c){n.alisteners[a][b][c]=g.cast(n.listeners[a][b][c])}},x={factory:function(){return new Q},freeze:"function"===typeof Object.freeze,methods:{reject:function(a){var b=this;h.defer(function(){x.resolve.call(b,x.state.broken,a)});return this},resolve:function(a){var b=this;h.defer(function(){x.resolve.call(b,x.state.resolved,a)});return this},resolved:function(){return this.state===x.state.broken||this.state===x.state.resolved},then:function(a,b){var c=this,d=x.factory(),e;e=function(e){var p=e?a:
b;e=e?!1:!0;var h;try{h=p(c.outcome),e=!1}catch(l){h=l,e=!0,void 0!==h&&!(h instanceof Error)&&("object"===typeof h&&(h=G.encode(h)),h=Error(h))}finally{if(h instanceof Q)c.state=x.state.pending,c.outcome=null,h.parentNode=c,h.then(function(a){g.each(c.children,function(c){c.resolve(a)})},function(a){g.each(c.children,function(c){c.reject(a)})});else{if(e&&void 0===h)throw Error(t.error.invalidArguments);d[!e?"resolve":"reject"](h||c.outcome)}return h}};"function"===typeof a&&x.vouch.call(this,x.state.resolved,
function(){return e(!0)});"function"===typeof b&&x.vouch.call(this,x.state.broken,function(){return e(!1)});d.parentNode=c;c.children.push(d);return d}},resolve:function(a,b){var c=a===x.state.broken?"error":"fulfill",d=this,e=!1,k=!1,p=[],h,l,m;if(this.state!==x.state.pending){if(null!==this.parentNode&&this.parentNode.state===x.state.resolved||0<this.children.length)return;throw Error(t.error.promiseResolved.replace("{{outcome}}",this.outcome));}this.state=a;this.outcome=b;g.each(this[c],function(c,
g){m=c.call(d,b);p.push(g);if(m instanceof Q)return e=!0,d.outcome=null,d.state=x.state.pending,!1;m instanceof Error&&(k=!0,l=m,a=x.state.broken)});if(e){for(h=p.length;h--;)g.remove(d[c],p[h]);return m}this.error=[];this.fulfill=[];k||(m=l,a=x.state.resolved);if(null!==this.parentNode&&this.parentNode.state===x.state.pending)this.parentNode[a===x.state.resolved?"resolve":"reject"](m||this.outcome);x.freeze&&Object.freeze(this);return this},state:{broken:"rejected",pending:"pending",resolved:"fulfilled"},
vouch:function(a,b){if(m.isEmpty(a))throw Error(t.error.invalidArguments);this.state===x.state.pending?this[a===x.state.resolved?"fulfill":"error"].push(b):this.state===a&&b(this.outcome);return this}};Q.prototype=x.methods;Q.prototype.constructor=Q;var v={current:"",initial:null,reg:RegExp(),routes:{},method:function(a){return r.route_methods.test(a)?a.toLowerCase():"all"},del:function(a,b,c){c=c||"all";b=v.method(b);var d="error"===a;if(d&&"all"!==b||!d&&v.routes[c][b].hasOwnProperty(a))return v.initial===
a&&(v.initial=null),delete v.routes[c][b][a];throw Error(t.error.invalidArguments);},hash:function(a){var b="";y||(void 0===a?b=z.location.hash.replace(r.hash_bang,""):(b=a.replace(r.hash_bang,""),z.location.hash="!"+b));return b},hostname:function(a){v.routes.hasOwnProperty(a)||(v.routes[a]={all:{},"delete":{},get:{},post:{},put:{}});return v.routes[a]},init:function(){var a=z.location.hash;m.isEmpty(a)?v.hash(null!==v.initial?v.initial:g.cast(v.routes.all.all,!0).remove("error")[0]):v.load(a)},
list:function(a,b){b=b||"all";var c;y?void 0!==a&&v.routes.hasOwnProperty(b)?c=g.cast(v.routes[b][v.method(a)],!0):(c=[],v.routes.hasOwnProperty(b)&&h.iterate(v.routes[b],function(a,b){c[b]=[];h.iterate(a,function(a,d){c[b].push(d)})})):c=g.cast(v.routes.all.all,!0);!y&&"all"!==b&&h.iterate(v.routes.all,function(a,b){void 0===c[b]&&(c[b]=[]);h.iterate(a,function(a,d){c[b].push(d)})});return c},load:function(a,b,c,d){c=c||"all";d=d||"all";var e="",k="",p=!0,l=!1,q=v.method(c.method||c),n,s;r.route_nget.test(q)&&
(q="get");a=a.replace(/^\#\!?|\?.*|\#.*/g,"");y||(v.current=a);n=function(a,c,b){void 0!==v.routes[a][c][b]?(e=b,k=c):"all"!==c&&void 0!==v.routes[a].all[b]?(e=b,k="all"):(h.iterate(v.routes[a][c],function(a,d){return s(d,c,b)}),m.isEmpty(e)&&"all"!==c&&h.iterate(v.routes[a].all,function(a,c){return s(c,"all",b)}))};s=function(a,c,b){if(h.compile(v.reg,"^"+a+"$")&&v.reg.test(b))return e=a,k=c,!1};"all"!==d&&!v.routes.hasOwnProperty(d)&&(g.each(g.cast(v.routes,!0),function(a){if(RegExp(a.replace(/^\*/g,
".*")).test(d))return d=a,l=!0,!1}),l||(d="all"));n(d,q,a);m.isEmpty(e)&&("all"!==d&&(d="all",n(d,q,a)),m.isEmpty(e)&&(e="error",k="all",p=!1));v.routes[d][k][e](b||e,c);return p},reset:function(){v.routes={all:{all:{error:function(){if(y)throw Error(t.error.invalidRoute);if(m.isEmpty(v.hash()))return history.go(-1);h.error(t.error.invalidRoute);null!==v.initial&&v.hash(v.initial)}},"delete":{},get:{},put:{},post:{}}}},server:function(a,b,c){var d,e;if(!y)throw Error(t.error.notSupported);a=a||{};
c=!0===c||443===a.port;d=function(a,c){var b=ca.parse(a.url),d=a.headers.host.replace(r.header_replace,"");v.load(b.pathname,c,a,d)};e=function(a){M(a,this,arguments);"function"===typeof b&&b(a)};v.enabled=!0;a.host=a.host||void 0;a.port=a.port||8E3;c?(Y.globalAgent.maxConnections=a.maxConnections,c=Y.createServer(a,d).on("error",e).listen(a.port)):(X.globalAgent.maxConnections=a.maxConnections||25,c=X.createServer(d).on("error",e).listen(a.port,a.host));c.maxConnections&&(c.maxConnections=a.maxConnections||
25);return c},set:function(a,b,c,d){d=y?d||"all":"all";c=y?v.method(c):"all";if("string"!==typeof a||m.isEmpty(a)||"function"!==typeof b)throw Error(t.error.invalidArguments);v.hostname(d)[c][a]=b;return!0}},F=function(){var a={current:"active",previous:null,header:null};return{getCurrent:function(){return a.current},setCurrent:function(b){if(null===b||"string"!==typeof b||a[0]===b||m.isEmpty(b))throw Error(t.error.invalidArguments);a.previous=a.current;a.current=b;n.fire(H,"state",b);return b},getHeader:function(){return a.header},
setHeader:function(b){if(null!==b&&("string"!==typeof b||a.header===b||m.isEmpty(b)))throw Error(t.error.invalidArguments);return a.header=b},getPrevious:function(){return a.previous},setPrevious:function(){throw Error(t.error.readOnly);}}}(),m={capitalize:function(a,b){a=m.trim(a);return!0===b?m.explode(a," ").map(function(a){return a.charAt(0).toUpperCase()+a.slice(1)}).join(" "):a.charAt(0).toUpperCase()+a.slice(1)},escape:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},explode:function(a,
b){if(void 0===b||""===b.toString())b=",";return m.isEmpty(a)?[]:m.trim(a).split(RegExp("\\s*"+b+"\\s*"))},hyphenate:function(a,b){var c=m.trim(a).replace(/\s+/g,"-");!0===b&&(c=c.replace(/([A-Z])/g,"-$1").toLowerCase());return c},isAlphaNum:function(a){return J.test({alphanum:a}).pass},isBoolean:function(a){return J.test({"boolean":a}).pass},isDate:function(a){return J.test({date:a}).pass},isDomain:function(a){return J.test({domain:a}).pass},isEmail:function(a){return J.test({email:a}).pass},isEmpty:function(a){return void 0!==
a?""===m.trim(a):!0},isIP:function(a){return J.test({ip:a}).pass},isInt:function(a){return J.test({integer:a}).pass},isNumber:function(a){return J.test({number:a}).pass},isPhone:function(a){return J.test({phone:a}).pass},isUrl:function(a){return J.test({url:a}).pass},singular:function(a){return r.plural.test(a)?a.slice(0,-1):a},toCamelCase:function(a){a=m.trim(a).replace(/\.|_|-|\@|\[|\]|\(|\)|\#|\$|\%|\^|\&|\*|\s+/g," ").toLowerCase().split(r.space_hyphen);var b=[];g.each(a,function(a,d){b.push(0===
d?a:m.capitalize(a))});return b.join("")},trim:function(a){return a.toString().replace(/^(\s+|\t+)|(\s+|\t+)$/g,"")},unCamelCase:function(a){return m.trim(a.replace(/([A-Z])/g," $1").toLowerCase())},uncapitalize:function(a){a=m.trim(a);return a.charAt(0).toLowerCase()+a.slice(1)},unhyphenate:function(a,b){b=!0===b;var c="";-1<a.indexOf("-")?g.each(m.trim(a).split("-"),function(a){c+=(b?m.capitalize(a):a)+" "}):c=b?m.capitalize(a):a;return m.trim(c)}},h={timer:{},repeating:{},$:function(a,b){if(!(void 0===
z||void 0===a)){var c=[],d=[],e=[],c=m.explode(a);b=!0===b;g.each(c,function(a){var c;r.selector_complex.test(a)?(c=g.last(a.split(" ").filter(function(a){if(!m.isEmpty(a)&&">"!==a)return!0})),r.hash.test(c)&&!r.selector_many.test(c)?a=z.querySelector(a):(a=z.querySelectorAll(a),b||(a=g.cast(a)))):r.hash.test(a)&&!r.selector_many.test(a)?a=z.querySelector(a):(a=z.querySelectorAll(a),b||(a=g.cast(a)));null!==a&&e.push(a)});g.each(e,function(a){d=d.concat(a)});r.hash.test(a)&&(!r.selector_many.test(a)&&
!r.selector_complex.test(a))&&(d=d[0]);return d}},alias:function(a,b){h.iterate(b,function(c,d){var e;!(c instanceof RegExp)&&"function"===typeof c?a[d]=c.bind(a[d]):!(c instanceof RegExp)&&!(c instanceof Array)&&c instanceof Object?(void 0===a[d]&&(a[d]={}),h.alias(a[d],b[d])):(e=function(a){b[d]=a},h.property(a,d,{enumerable:!0,get:function(){return b[d]},set:e,value:b[d]}))});return a},clearTimers:function(a){if(void 0===a||a.isEmpty())throw Error(t.error.invalidArguments);void 0!==h.timer[a]&&
(clearTimeout(h.timer[a]),delete h.timer[a]);void 0!==h.repeating[a]&&(clearTimeout(h.repeating[a]),delete h.repeating[a])},clone:function(a){var b;return a instanceof Array?a.concat():"boolean"===typeof a?Boolean(a):"function"===typeof a?a:"number"===typeof a?Number(a):"string"===typeof a?String(a):a instanceof RegExp?a:!y&&!s.ie&&a instanceof Document?P.decode(P.encode(a)):null!==a&&void 0!==a&&"undefined"!==typeof a.__proto__?h.extend(a.__proto__,a):a instanceof Object?(b=G.encode(a,!0),void 0!==
b?(b=G.decode(b),h.iterate(a,function(a,d){"function"===typeof a&&(b[d]=a)})):b=a,b):a},coerce:function(a){a=h.clone(a);var b;m.isEmpty(a)?a=void 0:"undefined"===a?a=void 0:"null"===a?a=null:r.string_boolean.test(a)?a=r.string_true.test(a):(b=G.decode(a,!0))&&void 0!==b?a=b:null!==a&&(void 0!==a&&!isNaN(Number(a)))&&(a=Number(a));return a},compile:function(a,b,c){a.compile(b,c);return!0},css:function(a,b){var c,d;c=l.create("style",{type:"text/css",media:b||"print, screen"},u("head")[0]);c.styleSheet?
c.styleSheet.cssText=a:(d=z.createTextNode(a),c.appendChild(d));return c},debounce:function(a,b,c){if("function"!==typeof a)throw Error(t.error.invalidArguments);b=b||1E3;c=c||D;return function(){h.defer(function(){a.apply(c,arguments)},b)}},define:function(a,b,c){a=a.split(".");var d=c,e=a.length;void 0===c&&(c=this);void 0===b&&(b=null);g.each(a,function(c,p){var h=p+1<e&&!isNaN(w.parse(a[p+1],10)),l=b;isNaN(w.parse(c,10))||(c=w.parse(c,10));void 0===d[c]?d[c]=h?[]:{}:d[c]instanceof Object&&h?d[c]=
g.cast(d[c]):d[c]instanceof Object?void 0:d[c]=d[c]instanceof Array&&!h?g.toObject(d[c]):{};p+1===e?d[c]=l:d=d[c]});return c},defer:function(a,b,c){b=b||0;c=c||h.uuid(!0);h.clearTimers(c);h.timer[c]=setTimeout(function(){h.clearTimers(c);a()},b);return c},domId:function(a){return"a"+a.replace(/-/g,"").slice(1)},error:function(a,b,c,d){d=!0===d;a={arguments:b,message:a.message||a,number:void 0!==a.number?a.number&65535:void 0,scope:c,stack:a.stack||void 0,timestamp:(new Date).toUTCString(),type:a.type||
"TypeError"};h.log(a.stack||a.message,!d?"error":"warn");H.error.log.push(a);n.fire(H,"error",a)},extend:function(){return"function"===typeof Object.create?function(a,b){var c;if(void 0===a)throw Error(t.error.invalidArguments);c=Object.create(a);b instanceof Object&&h.merge(c,b);return c}:function(a,b){var c;if(void 0===a)throw Error(t.error.invalidArguments);f=function(){};f.prototype=a;c=new f;b instanceof Object&&h.merge(c,b);return c}}(),genId:function(a,b){var c;if(void 0!==a&&(void 0!==a.id&&
""!==a.id||a instanceof Array||a instanceof String||"string"===typeof a))return a;if(!0===b){do c=h.domId(h.uuid(!0));while(void 0!==u("#"+c))}else c=h.domId(h.uuid(!0));return"object"===typeof a?(a.id=c,a):c},hex:function(a){var b,c;if("#"!==a.charAt(0)){b=m.explode(a.replace(/.*\(|\)/g,""));a=w.parse(b[0]||0);c=w.parse(b[1]||0);b=w.parse(b[2]||0);a=(b|c<<8|a<<16).toString(16);if(6>a.length){b=w.diff(a.length,6);for(c=-1;++c<b;)a="0"+a}a="#"+a}return a},iterate:function(){return"function"===typeof Object.keys?
function(a,b){if("function"!==typeof b)throw Error(t.error.invalidArguments);g.each(Object.keys(a),function(c){return b.call(a,a[c],c)});return a}:function(a,b){var c=Object.prototype.hasOwnProperty,d,e;if("function"!==typeof b)throw Error(t.error.invalidArguments);for(d in a)if(c.call(a,d)){if(e=b.call(a,a[d],d),!1===e)break}else break;return a}}(),loading:function(a){var b=H.loading;a=h.object(a);if(a instanceof Array)return g.each(a,function(a){h.loading(a)});if(null===b.url||void 0===a)throw Error(t.error.invalidArguments);
void 0===b.image&&(b.image=new Image,b.image.src=b.url);l.clear(a);l.create("img",{alt:t.common.loading,src:b.image.src},l.create("div",{"class":"loading"},a));return a},log:function(a,b){var c;"undefined"!==typeof console&&(c="object"!==typeof a?"["+(new Date).toLocaleTimeString()+"] "+a:a,console[b||"log"](c))},merge:function(a,b){h.iterate(b,function(c,b){a[b]=h.clone(c)});return a},module:function(a,b){if(void 0!==u[a]||!b instanceof Object)throw Error(t.error.invalidArguments);u[a]=b;return u[a]},
object:function(a){return"object"===typeof a?a:"#"===a.toString().charAt(0)?u(a):a},parse:function(a){var b={},c={};void 0===a&&(a=!y?N.href:"");y?b=ca.parse(a):(b=z.createElement("a"),b.href=a);y&&h.iterate(b,function(a,c){null===a&&(b[c]=void 0)});c={auth:y?null:r.auth.exec(a),protocol:b.protocol||"http:",hostname:b.hostname||"localhost",port:!m.isEmpty(b.port)?w.parse(b.port,10):"",pathname:b.pathname,search:b.search||"",hash:b.hash||"",host:b.host||"localhost"};s.ie&&(":"===c.protocol&&(c.protocol=
N.protocol),m.isEmpty(c.hostname)&&(c.hostname=N.hostname),m.isEmpty(c.host)&&(c.host=N.host),"/"!==c.pathname.charAt(0)&&(c.pathname="/"+c.pathname));c.auth=b.auth||(null===c.auth?"":c.auth[1]);c.href=b.href||c.protocol+"//"+(m.isEmpty(c.auth)?"":c.auth+"@")+c.host+c.pathname+c.search+c.hash;c.path=b.path||c.pathname+c.search;c.query=h.queryString(null,c.search);return c},property:function(){return(y||!s.ie||8<s.version)&&"function"===typeof Object.defineProperty?function(a,b,c){if(!(c instanceof
Object))throw Error(t.error.invalidArguments);void 0!==c.value&&void 0!==c.get&&delete c.value;Object.defineProperty(a,b,c)}:function(a,b,c){if(!(c instanceof Object))throw Error(t.error.invalidArguments);a[b]=c.value;return a}},proto:function(a,b){h.iterate({array:{add:function(a){return g.add(this,a)},addClass:function(a){return g.each(this,function(b){l.klass(b,a)})},after:function(a,b){var e=[];g.each(this,function(k){e.push(l.create(a,b,k,"after"))});return e},append:function(a,b){var e=[];g.each(this,
function(k){e.push(l.create(a,b,k,"last"))});return e},attr:function(a,b){var e=[];g.each(this,function(k){e.push(l.attr(k,a,b))});return e},before:function(a,b){var e=[];g.each(this,function(k){e.push(l.create(a,b,k,"before"))});return e},chunk:function(a){return g.chunk(this,a)},clear:function(){return!y&&this[0]instanceof Element?g.each(this,function(a){l.clear(a)}):g.clear(this)},clone:function(){return h.clone(this)},collect:function(a){return g.collect(this,a)},compact:function(){return g.compact(this)},
contains:function(a){return g.contains(this,a)},count:function(a){return g.count(this,a)},create:function(a,b,e){var k=[];g.each(this,function(g){k.push(l.create(a,b,g,e))});return k},css:function(a,b){return g.each(this,function(e){l.css(e,a,b)})},data:function(a,b){var e=[];g.each(this,function(k){e.push(l.data(k,a,b))});return e},diff:function(a){return g.diff(this,a)},disable:function(){return g.each(this,function(a){l.disable(a)})},dispatch:function(a,b,e,k){return g.each(this,function(g){l.dispatch(g,
a,b,e,k)})},destroy:function(){g.each(this,function(a){l.destroy(a)});return[]},each:function(a){return g.each(this,a)},empty:function(){return g.empty(this)},enable:function(){return g.each(this,function(a){l.enable(a)})},equal:function(a){return g.equal(this,a)},fill:function(a,b,e){return g.fill(this,a,b,e)},find:function(a){var b=[];g.each(this,function(e){e.find(a).each(function(a){b.add(a)})});return b},fire:function(){var a=arguments;return g.each(this,function(b){n.fire.apply(n,[b].concat(g.cast(a)))})},
first:function(){return g.first(this)},flat:function(){return g.flat(this)},genId:function(){return g.each(this,function(a){h.genId(a)})},get:function(a,b){var e=[];g.each(this,function(k,g){k.get(a,b,function(a){e[g]=a},function(a){e[g]=a})});return e},has:function(a){var b=[];g.each(this,function(e){b.push(l.has(e,a))});return b},hasClass:function(a){var b=[];g.each(this,function(e){b.push(l.hasClass(e,a))});return b},hide:function(){return g.each(this,function(a){l.hide(a)})},html:function(a){var b;
if(void 0!==a)return g.each(this,function(b){l.html(b,a)});b=[];g.each(this,function(a){b.push(l.html(a))});return b},index:function(a){return g.index(this,a)},indexed:function(){return g.indexed(this)},intersect:function(a){return g.intersect(this,a)},is:function(a){var b=[];g.each(this,function(e){b.push(l.is(e,a))});return b},isAlphaNum:function(){var a=[];g.each(this,function(b){a.push(b.isAlphaNum())});return a},isBoolean:function(){var a=[];g.each(this,function(b){a.push(b.isBoolean())});return a},
isChecked:function(){var a=[];g.each(this,function(b){a.push(b.isChecked())});return a},isDate:function(){var a=[];g.each(this,function(b){a.push(b.isDate())});return a},isDisabled:function(){var a=[];g.each(this,function(b){a.push(l.isDisabled(b))});return a},isDomain:function(){var a=[];g.each(this,function(b){a.push(b.isDomain())});return a},isEmail:function(){var a=[];g.each(this,function(b){a.push(b.isEmail())});return a},isEmpty:function(){var a=[];g.each(this,function(b){a.push(b.isEmpty())});
return a},isHidden:function(){var a=[];g.each(this,function(b){a.push(l.isHidden(b))});return a},isIP:function(){var a=[];g.each(this,function(b){a.push(b.isIP())});return a},isInt:function(){var a=[];g.each(this,function(b){a.push(b.isInt())});return a},isNumber:function(){var a=[];g.each(this,function(b){a.push(b.isNumber())});return a},isPhone:function(){var a=[];g.each(this,function(b){a.push(b.isPhone())});return a},isUrl:function(){var a=[];g.each(this,function(b){a.push(b.isUrl())});return a},
keep_if:function(a){return g.keep_if(this,a)},keys:function(){return g.keys(this)},last:function(a){return g.last(this,a)},limit:function(a,b){return g.limit(this,a,b)},listeners:function(a){var b=[];g.each(this,function(e){g.merge(b,n.listeners(e,a))});return b},loading:function(){return g.each(this,function(a){h.loading(a)})},max:function(){return g.max(this)},mean:function(){return g.mean(this)},median:function(){return g.median(this)},merge:function(a){return g.merge(this,a)},min:function(){return g.min(this)},
mingle:function(a){return g.mingle(this,a)},mode:function(){return g.mode(this)},on:function(a,b,e,k,p){return g.each(this,function(g){n.add(g,a,b,e,k||g,p)})},once:function(a,b,e,k,p){return g.each(this,function(g){n.once(g,a,b,e,k||g,p)})},position:function(){var a=[];g.each(this,function(b){a.push(l.position(b))});return a},prepend:function(a,b){var e=[];g.each(this,function(k){e.push(l.create(a,b,k,"first"))});return e},range:function(){return g.range(this)},rassoc:function(a){return g.rassoc(this,
a)},reject:function(a){return g.reject(this,a)},remove:function(a,b){return g.remove(this,a,b)},remove_if:function(a){return g.remove_if(this,a)},remove_while:function(a){return g.remove_while(this,a)},removeAttr:function(a){g.each(this,function(b){l.removeAttr(b,a)});return this},removeClass:function(a){return g.each(this,function(b){l.klass(b,a,!1)})},replace:function(a){return g.replace(this,a)},rest:function(a){return g.rest(this,a)},rindex:function(a){return g.rindex(this,a)},rotate:function(a){return g.rotate(this,
a)},serialize:function(a,b){return l.serialize(this,a,b)},series:function(a,b,e){return g.series(a,b,e)},show:function(){return g.each(this,function(a){l.show(a)})},size:function(){var a=[];g.each(this,function(b){a.push(l.size(b))});return a},split:function(a){return g.split(this,a)},sum:function(){return g.sum(this)},take:function(a){return g.take(this,a)},text:function(a){return g.each(this,function(b){"object"!==typeof b&&(b=h.object(b));"function"===typeof b.text&&b.text(a)})},tpl:function(a){return g.each(this,
function(b){h.tpl(a,b)})},toggleClass:function(a){return g.each(this,function(b){l.toggleClass(b,a)})},total:function(){return g.total(this)},toObject:function(){return g.toObject(this)},un:function(a,b,e){return g.each(this,function(k){n.remove(k,a,b,e)})},unique:function(){return g.unique(this)},update:function(a){return g.each(this,function(b){l.update(b,a)})},val:function(a){var b=[],e=null,k=!0;g.each(this,function(g){null!==e&&(k=e===g.type);e=g.type;"function"===typeof g.val&&b.push(g.val(a))});
return k?b[0]:b},validate:function(){var a=[];g.each(this,function(b){a.push(l.validate(b))});return a},zip:function(){return g.zip(this,arguments)}},element:{addClass:function(a){return l.klass(this,a,!0)},after:function(a,b){return l.create(a,b,this,"after")},append:function(a,b){return l.create(a,b,this,"last")},attr:function(a,b){return l.attr(this,a,b)},before:function(a,b){return l.create(a,b,this,"before")},clear:function(){return l.clear(this)},create:function(a,b,e){return l.create(a,b,this,
e)},css:function(a,b){return l.css(this,a,b)},data:function(a,b){return l.data(this,a,b)},destroy:function(){return l.destroy(this)},disable:function(){return l.disable(this)},dispatch:function(a,b,e,k){return l.dispatch(this,a,b,e,k)},enable:function(){return l.enable(this)},find:function(a){return l.find(this,a)},fire:function(){return n.fire.apply(n,[this].concat(g.cast(arguments)))},genId:function(){return h.genId(this)},get:function(a,b,e,k,g){var h=this,q=x.factory(),m;m=q.then(function(a){l.html(h,
a);n.fire(h,"afterGet");"function"===typeof b&&b.call(h,a)},function(a){l.html(h,arg||t.error.serverError);n.fire(h,"failedGet");"function"===typeof e&&e.call(h,arg);throw a;});n.fire(this,"beforeGet");a.get(function(a){q.resolve(a)},function(a){q.reject(a)},k,g);return m},has:function(a){return l.has(this,a)},hasClass:function(a){return l.hasClass(this,a)},hide:function(){return l.hide(this)},html:function(a){return l.html(this,a)},is:function(a){return l.is(this,a)},isAlphaNum:function(){return l.isAlphaNum(this)},
isBoolean:function(){return l.isBoolean(this)},isChecked:function(){return l.isChecked(this)},isDate:function(){return l.isDate(this)},isDisabled:function(){return l.isDisabled(this)},isDomain:function(){return l.isDomain(this)},isEmail:function(){return l.isEmail(this)},isEmpty:function(){return l.isEmpty(this)},isHidden:function(){return l.hidden(this)},isIP:function(){return l.isIP(this)},isInt:function(){return l.isInt(this)},isNumber:function(){return l.isNumber(this)},isPhone:function(){return l.isPhone(this)},
isUrl:function(){return l.isUrl(this)},jsonp:function(a,b,e){var g=this;return s.jsonp(a,function(a){var c=a,e=b,h;try{void 0!==e?(e=e.replace(/\]|'|"/g,"").replace(/\./g,"[").split("["),e.each(function(a){c=c[isNaN(a)?a:w.parse(a,10)];if(void 0===c)throw Error(t.error.propertyNotFound);}),h=c):h=a}catch(m){h=t.error.serverError,M(m,arguments,this)}l.html(g,h)},function(a){l.html(g,t.error.serverError);throw a;},e)},listeners:function(a){return n.list(this,a)},loading:function(){return h.loading(this)},
on:function(a,b,e,g,h){return n.add(this,a,b,e,g||this,h)},once:function(a,b,e,g,h){return n.once(this,a,b,e,g||this,h)},prepend:function(a,b){return l.create(a,b,this,"first")},prependChild:function(a){return l.prependChild(this,a)},position:function(){return l.position(this)},removeAttr:function(a){return l.removeAttr(this,a)},removeClass:function(a){return l.klass(this,a,!1)},serialize:function(a,b){return l.serialize(this,a,b)},show:function(){return l.show(this)},size:function(){return l.size(this)},
text:function(a){return l.text(this,a)},toggleClass:function(a){return l.toggleClass(this,a)},tpl:function(a){return h.tpl(a,this)},un:function(a,b,e){return n.remove(this,a,b,e)},update:function(a){return l.update(this,a)},val:function(a){return l.val(this,a)},validate:function(){return l.validate(this)}},"function":{reflect:function(){return h.reflect(this)},debounce:function(a){return h.debounce(this,a)}},number:{diff:function(a){return w.diff(this,a)},fire:function(){return n.fire.apply(n,[this.toString()].concat(g.cast(arguments)))},
format:function(a,b){return w.format(this,a,b)},half:function(a){return w.half(this,a)},isEven:function(){return w.even(this)},isOdd:function(){return w.odd(this)},listeners:function(a){return n.list(this.toString(),a)},on:function(a,b,e,g,h){n.add(this.toString(),a,b,e,g||this,h);return this},once:function(a,b,e,g,h){n.once(this.toString(),a,b,e,g||this,h);return this},random:function(){return w.random(this)},round:function(){return w.round(this)},roundDown:function(){return w.round(this,"down")},
roundUp:function(){return w.round(this,"up")},un:function(a,b,e){n.remove(this.toString(),a,b,e);return this}},string:{allows:function(a){return s.allows(this,a)},capitalize:function(a){return m.capitalize(this,a)},del:function(a,b,e){return s.request(this,"DELETE",a,b,null,e)},escape:function(){return m.escape(this)},expire:function(a){return B.expire(this,a)},explode:function(a){return m.explode(this,a)},fire:function(){return n.fire.apply(n,[this].concat(g.cast(arguments)))},get:function(a,b,e){return s.request(this,
"GET",a,b,null,e)},headers:function(a,b){return s.request(this,"HEAD",a,b)},hyphenate:function(a){return m.hyphenate(this,a)},isAlphaNum:function(){return m.isAlphaNum(this)},isBoolean:function(){return m.isBoolean(this)},isDate:function(){return m.isDate(this)},isDomain:function(){return m.isDomain(this)},isEmail:function(){return m.isEmail(this)},isEmpty:function(){return m.isEmpty(this)},isIP:function(){return m.isIP(this)},isInt:function(){return m.isInt(this)},isNumber:function(){return m.isNumber(this)},
isPhone:function(){return m.isPhone(this)},isUrl:function(){return m.isUrl(this)},jsonp:function(a,b,e){return s.jsonp(this,a,b,e)},listeners:function(a){return n.list(this,a)},patch:function(a,b,e,g){return s.request(this,"PATCH",a,b,e,g)},post:function(a,b,e,g){return s.request(this,"POST",a,b,e,g)},put:function(a,b,e,g){return s.request(this,"PUT",a,b,e,g)},on:function(a,b,e,g,h){return n.add(this,a,b,e,g,h)},once:function(a,b,e,g,h){return n.add(this,a,b,e,g,h)},options:function(a,b){return s.request(this,
"OPTIONS",a,b)},permissions:function(){return s.permissions(this)},singular:function(){return m.singular(this)},toCamelCase:function(){return m.toCamelCase(this)},toNumber:function(a){return w.parse(this,a)},trim:function(){return m.trim(this)},un:function(a,b,e){return n.remove(this,a,b,e)},unCamelCase:function(){return m.unCamelCase(this)},uncapitalize:function(){return m.uncapitalize(this)},unhyphenate:function(a){return m.unhyphenate(this,a)}}}[b],function(b,d){h.property(a.prototype,d,{value:b,
configurable:!0,writable:!0})});return a},queryString:function(a,b){var c={},d=void 0!==b?-1<b.indexOf("?")?b.replace(/.*\?/,""):null:y||m.isEmpty(N.search)?null:N.search.replace("?",""),e;null!==d&&!m.isEmpty(d)&&(d=d.split("&"),g.each(d,function(a){e=a.split("=");m.isEmpty(e[0])||(void 0===e[1]||m.isEmpty(e[1])?e[1]="":m.isNumber(e[1])?e[1]=Number(e[1]):m.isBoolean(e[1])&&(e[1]="true"===e[1]),void 0===c[e[0]]?c[e[0]]=e[1]:(c[e[0]]instanceof Array||(c[e[0]]=[c[e[0]]]),c[e[0]].push(e[1])))}));null!==
a&&void 0!==a&&(c=c[a]);return c},reflect:function(a){void 0===a&&(a=this||u);a=a.toString().match(r.reflect)[1];return m.explode(a)},repeat:function(a,b,c,d){b=b||10;c=c||h.uuid(!0);if(!(!1!==d&&!1===a()))return h.defer(function(){var d=function(a,b,c){var d=this;!1!==a()?h.repeating[c]=setTimeout(function(){d.call(d,a,b,c)},b):delete h.repeating[c]};d.call(d,a,b,c)},b,c),c},script:function(a,b,c){return l.create("script",{type:"application/javascript",src:a},b||u("head")[0],c)},stylesheet:function(a,
b){return l.create("link",{rel:"stylesheet",type:"text/css",href:a,media:b||"print, screen"},u("head")[0])},stop:function(a){void 0!==a.cancelBubble&&(a.cancelBubble=!0);"function"===typeof a.preventDefault&&a.preventDefault();"function"===typeof a.stopPropagation&&a.stopPropagation();a.returnValue=!1;return a},target:function(a){return a.target||a.srcElement},tpl:function(a,b){var c;if("object"!==typeof a||!r.object_undefined.test(typeof b)&&void 0===(b="#"===b.charAt(0)?u(b):u(b)[0]))throw Error(t.error.invalidArguments);
void 0===b&&(b=u("body")[0]);c=z.createDocumentFragment();a instanceof Array?g.each(a,function(a,b){l.html(l.create(g.cast(a,!0)[0],c),g.cast(a)[0])}):h.iterate(a,function(a,b){"string"===typeof a?l.html(l.create(b,c),a):(a instanceof Array||a instanceof Object)&&h.tpl(a,l.create(b,c))});b.appendChild(c);return g.last(b.childNodes)},uuid:function(a){var b=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},c=[8,9,"a","b"],b=b()+b()+"-"+b()+"-4"+b().substr(0,3)+"-"+c[Math.floor(Math.random()*
c.length)]+b().substr(0,3)+"-"+b()+b()+b();!0===a&&(b=b.replace(/-/g,""));return b},walk:function(a,b){g.each(b.replace(/\]$/,"").replace(/\]/g,".").split(/\.|\[/),function(b){a=a[b]});return a},when:function(){var a=0,b=x.factory(),c=g.cast(arguments),d;c[0]instanceof Array&&(c=c[0]);d=c.length;0===d?b.resolve(null):g.each(c,function(e){e.then(function(e){++a===d&&!b.resolved()&&(1<c.length?b.resolve(c.map(function(a){return a.outcome})):b.resolve(c[0].outcome))},function(a){b.resolved()||(1<c.length?
b.reject(c.map(function(a){return a.outcome})):b.reject(c[0].outcome))})});return b}},J={test:function(a){var b=!1,c=[],d=null,e=[],k;void 0!==a.nodeName&&"FORM"===a.nodeName?(m.isEmpty(a.id)&&h.genId(a),e=u("#"+a.id+" input","#"+a.id+" select"),g.each(e,function(a){var d={},e,g;e=r[a.nodeName.toLowerCase()]?r[a.nodeName.toLowerCase()]:!m.isEmpty(a.id)&&r[a.id.toLowerCase()]?r[a.id.toLowerCase()]:"notEmpty";g=a.val();null===g&&(g="");d[e]=g;J.test(d).pass||(c.push({element:a,test:e,value:g}),b=!0)})):
h.iterate(a,function(a,e){if(void 0===e||void 0===a)c.push({test:e,value:a}),b=!0;else switch(d="#"===a.toString().charAt(0)?void 0!==u(a)?u(a).val():"":a,e){case "date":isNaN((new Date(d)).getYear())&&(c.push({test:e,value:d}),b=!0);break;case "domain":r.domain.test(d.replace(r.scheme,""))||(c.push({test:e,value:d}),b=!0);break;case "domainip":if(!r.domain.test(d.replace(r.scheme,""))||!r.ip.test(d))c.push({test:e,value:d}),b=!0;break;default:k=r[e]||e,k.test(d)||(c.push({test:e,value:d}),b=!0)}});
return{pass:!b,invalid:c}}},fa=function(){var a=/2|3/,b,c,d,e,k;c={"User-Agent":"abaaso/3.7.14 node.js/"+process.versions.node.replace(/^v/,"")+" ("+m.capitalize(process.platform)+" V8/"+process.versions.v8+" )","Content-Type":"text/plain",Accept:"*/*"};k=function(a){this.readyState!==a&&(this.readyState=a,this.dispatchEvent("readystatechange"),4===this.readyState&&!this._error&&(this.dispatchEvent("load"),this.dispatchEvent("loadend")));return this};d=function(a){var b=this;k.call(this,2);this.status=
a.statusCode;this._resheaders=a.headers;void 0!==this._resheaders["set-cookie"]&&this._resheaders["set-cookie"]instanceof Array&&(this._resheaders["set-cookie"]=this._resheaders["set-cookie"].join(";"));a.on("data",function(c){a.setEncoding("utf8");b._send&&(c&&(b.responseText+=c),k.call(b,3))});a.on("end",function(){b._send&&(k.call(b,4),b._send=!1)});a.on("close",function(a){e.call(b,a)})};e=function(a){this.status=503;this.statusText=a;this.responseText=void 0!==a?a.stack||a:a;this._error=!0;this.dispatchEvent("error");
k.call(this,4)};b=function(){this.onreadystatechange=this.onloadstart=this.onloadend=this.onload=this.onerror=this.onabort=null;this.readyState=0;this.response=null;this.responseType=this.responseText="";this.responseXML=null;this.status=0;this.statusText="";this._id=h.genId();this._error=!1;this._headers={};this._listeners={};this._params={};this._request=null;this._resheaders={};this._send=!1};b.prototype.abort=function(){null!==this._request&&(this._request.abort(),this._request=null);this.responseXML=
this.responseText="";this._error=!0;this._headers={};if(!0===this._send||a.test(this.readyState))this._send=!1,k.call(this,4);this.dispatchEvent("abort");this.readyState=0;return this};b.prototype.addEventListener=function(a,b){this._listeners.hasOwnProperty(a)||(this._listeners[a]=[]);this._listeners[a].add(b);return this};b.prototype.dispatchEvent=function(a){var b=this;if("function"===typeof this["on"+a])this["on"+a]();this._listeners.hasOwnProperty(a)&&g.each(this._listeners[a],function(a){"function"===
typeof a&&a.call(b)});return this};b.prototype.getAllResponseHeaders=function(){var a="";if(2>this.readyState||this._error)throw Error(t.error.invalidStateNoHeaders);h.iterate(this._resheaders,function(b,c){a+=c+": "+b+"\n"});return a};b.prototype.getResponseHeader=function(a){if(2>this.readyState||this._error)throw Error(t.error.invalidStateNoHeaders);return this._resheaders[a]||this._resheaders[a.toLowerCase()]};b.prototype.open=function(a,b,d,e,g){var k=this;if(void 0!==d&&!0!==d)throw Error(t.error.invalidStateNoSync);
this.abort();this._error=!1;this._params={method:a,url:b,async:d||!0,user:e||null,password:g||null};h.iterate(c,function(a,b){k._headers[b]=a});this.readyState=1;return this};b.prototype.overrideMimeType=function(a){this._headers["Content-Type"]=a;return this};b.prototype.removeEventListener=function(a,b){if(this._listeners.hasOwnProperty(a))return this._listeners[a].remove(b),this};b.prototype.send=function(a){a=a||null;var b=this,c,g;if(1>this.readyState)throw Error(t.error.invalidStateNotOpen);
if(this._send)throw Error(t.error.invalidStateNotSending);g=h.parse(this._params.url);g.port=g.port||("https:"===g.protocol?443:80);null!==this._params.user&&null!==this._params.password&&(g.auth=this._params.user+":"+this._params.password);r.put_post.test(this._params.method)&&(this._headers["Content-Length"]=null!==a?Buffer.byteLength(a):0);this._headers.Host=g.hostname+(!r.http_ports.test(g.port)?":"+g.port:"");c={hostname:g.hostname,path:g.path,port:g.port,method:this._params.method,headers:this._headers};
"https:"===g.protocol&&(c.rejectUnauthorized=!1,c.agent=!1);void 0!==g.auth&&(c.auth=g.auth);b._send=!0;b.dispatchEvent("readystatechange");c=("http:"===g.protocol?X:Y).request(c,function(a){d.call(b,a)}).on("error",function(a){e.call(b,a)});null===a?c.setSocketKeepAlive(!0,1E4):c.write(a,"utf8");this._request=c;c.end();b.dispatchEvent("loadstart");return this};b.prototype.setRequestHeader=function(a,b){if(1!==this.readyState)throw Error(t.error.invalidStateNotUsable);if(this._send)throw Error(t.error.invalidStateNotSending);
this._headers[a]=b;return this};return b},P={decode:function(a){try{var b;if("string"!==typeof a||m.isEmpty(a))throw Error(t.error.invalidArguments);s.ie?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b}catch(c){M(c,arguments,this)}},encode:function(a,b){try{if(void 0===a)throw Error(t.error.invalidArguments);var c=(b=!1!==b)?"<xml>":"",d=!1!==arguments[2],e;null!==a&&void 0!==a.xml&&(a=a.xml);a instanceof Document&&(a=
(new XMLSerializer).serializeToString(a));e=function(a,b){var c="<n>v</n>";/\&|\<|\>|\"|\'|\t|\r|\n|\@|\$/g.test(b)&&(c=c.replace("v","<![CDATA[v]]\x3e"));return c.replace("n",a).replace("v",b)};r.boolean_number_string.test(typeof a)?c+=e("item",a):"object"===typeof a&&h.iterate(a,function(a,b){c+=P.encode(a,"object"===typeof a,!1).replace(/item|xml/g,isNaN(b)?b:"item")});c+=b?"</xml>":"";d&&(c='<?xml version="1.0" encoding="UTF8"?>'+c);return c}catch(g){M(g,arguments,this)}}};M=h.error;return{array:g,
callback:{},client:{activex:s.activex,android:s.android,blackberry:s.blackberry,chrome:s.chrome,firefox:s.firefox,ie:s.ie,ios:s.ios,linux:s.linux,mobile:s.mobile,opera:s.opera,osx:s.osx,playbook:s.playbook,safari:s.safari,tablet:s.tablet,size:{height:0,width:0},version:0,webos:s.webos,windows:s.windows,del:function(a,b,c,d,e){return s.request(a,"DELETE",b,c,null,d,e)},get:function(a,b,c,d,e){return s.request(a,"GET",b,c,null,d,e)},headers:function(a,b,c,d){return s.request(a,"HEAD",b,c,null,null,
d)},patch:function(a,b,c,d,e,g){return s.request(a,"PATCH",b,c,d,e,g)},post:function(a,b,c,d,e,g){return s.request(a,"POST",b,c,d,e,g)},put:function(a,b,c,d,e,g){return s.request(a,"PUT",b,c,d,e,g)},jsonp:function(a,b,c,d){return s.jsonp(a,b,c,d)},options:function(a,b,c,d){return s.request(a,"OPTIONS",b,c,null,null,d)},permissions:s.permissions},cookie:U,element:l,json:G,label:t,loading:{create:h.loading,url:null},message:{clear:function(a){return n.remove(D,"message","message",a||"all")},send:function(a,
b){try{a.postMessage(b,"*")}catch(c){M(c,arguments,this)}return a},recv:function(a,b){return n.add(D,"message",a,"message",D,b||"all")}},mouse:W,number:w,regex:r,route:{enabled:!1,current:v.current,del:v.del,hash:v.hash,init:v.init,initial:v.initial,list:v.list,load:v.load,reset:v.reset,server:v.server,set:v.set},state:{},string:m,xml:P,$:h.$,alias:h.alias,aliased:"abaaso",allows:s.allows,append:function(a,b,c){c instanceof Element&&c.genId();return l.create(a,b,c,"last")},bootstrap:function(){var a=
this,b,c;delete H.bootstrap;b=function(a){n.remove(a);g.each(g.cast(a.childNodes),function(a){b(a)})};c=function(b){if(r.complete_loaded.test(z.readyState))return"function"===typeof a.init&&a.init.call(a),!1};if(y)delete this.cookie,this.array.cast=g.cast(),this.property=h.property=h.property(),XMLHttpRequest=fa();else{this.client.size=s.size();this.client.version=s.version=s.version();this.client.mobile=s.mobile.call(this);this.client.tablet=s.tablet.call(this);if(s.ie&&8>s.version)throw Error(t.error.upgrade);
this.array.cast=g.cast();this.mouse.view=W.view=W.view();this.property=h.property=h.property();void 0===Array.prototype.filter&&(Array.prototype.filter=function(a,b){if(void 0===this||null===this||"function"!==typeof a)throw Error(t.error.invalidArguments);for(var c=null,g=Object(this),h=g.length>>>0,l=[],m=null,c=0;c<h;c++)c in g&&(m=g[c],a.call(b,m,c,g)&&l.push(m));return l});void 0===Array.prototype.forEach&&(Array.prototype.forEach=function(a,b){if(null===this||"function"!==typeof a)throw Error(t.error.invalidArguments);
var c,g=0,h=Object(this),l=h.length>>>0;for(b&&(c=b);g<l;){var m;g in h&&(m=h[g],a.call(c,m,g,h));g++}});void 0===Array.prototype.indexOf&&(Array.prototype.indexOf=function(a,b){for(var c=b||0,g=this.length;c<g;c++)if(this[c]===a)return c;return-1});void 0===Array.prototype.map&&(Array.prototype.map=function(a,b){var c,g,h;if(null==this)throw new TypeError("this is null or not defined");var l=Object(this),m=l.length>>>0;if("[object Function]"!={}.toString.call(a))throw new TypeError(a+" is not a function");
b&&(c=b);g=Array(m);for(h=0;h<m;){var n;h in l&&(n=l[h],n=a.call(c,n,h,l),g[h]=n);h++}return g});void 0===Array.prototype.reduce&&(Array.prototype.reduce=function(a){if(null===this||void 0===this)throw new TypeError("Object is null or undefined");var b=0,c=this.length>>0,g;if("function"!==typeof a)throw new TypeError("First argument is not callable");if(2>arguments.length){if(0===c)throw new TypeError("Array length is 0 and no second argument");g=this[0];b=1}else g=arguments[1];for(;b<c;)b in this&&
(g=a.call(void 0,g,this[b],b,this)),++b;return g});void 0===z.documentElement.classList&&function(a){var b,c,h;if("HTMLElement"in a||"Element"in a)if(b=function(a){var b=!m.isEmpty(a.className)?a.className.explode(" "):[],c=this;g.each(b,function(a){c.push(a)});this.updateClassName=function(){a.className=this.join(" ")}},c=function(){return new b(this)},h=b.prototype=[],a=(a.HTMLElement||a.Element).prototype,h.add=function(a){g.contains(this,a)||(this.push(a),this.updateClassName())},h.contains=function(a){return g.contains(this,
a)},h.remove=function(a){g.contains(this,a)&&(g.remove(this,a),this.updateClassName())},h.toggle=function(a){g[g.contains(this,a)?"remove":"add"](this,a);this.updateClassName()},Object.defineProperty)c={get:c,enumerable:!s.ie||8<s.version?!0:!1,configurable:!0},Object.defineProperty(a,"classList",c);else if(Object.prototype.__defineGetter__)a.__defineGetter__("classList",c);else throw Error("Could not create classList shim");}(D);void 0===Function.prototype.bind&&(Function.prototype.bind=function(a){var b=
this,c=Array.prototype.slice,g=c.call(arguments,1);return function(){return b.apply(a,g.concat(c.call(arguments)))}})}u=h.$;h.merge(u,this);delete u.$;delete u.bootstrap;delete u.init;delete u.loading;v.reset();u.loading=this.loading.create.bind(u.loading);u.fire=this.fire;u.on=this.on;u.once=this.once;u.un=this.un;u.listeners=this.listeners;h.proto(Array,"array");"undefined"!==typeof Element&&h.proto(Element,"element");s.ie&&8===s.version&&h.proto(HTMLDocument,"element");h.proto(Function,"function");
h.proto(Number,"number");h.proto(String,"string");u.error.log=this.error.log=[];y||(n.add(D,"error",function(a){n.fire(H,"error",a)},"error",D,"all"),n.add(D,"hashchange",function(b){b=N.hash.replace(/^\#\!?|\?.*|\#.*/g,"");if(u.route.current!==b||a.route.current!==b)a.route.current=b,u.route.current!==a.route.current&&(u.route.current=a.route.current),n.fire(H,"beforeHash, hash, afterHash",N.hash)},"hash",D,"all"),n.add(D,"resize",function(b){u.client.size=a.client.size=s.size();n.fire(H,"resize",
a.client.size)},"resize",D,"all"),n.add(D,"load",function(a){n.fire(H,"render");n.remove(H,"render");n.remove(this,"load")}),"function"===typeof Object.observe&&n.add(D,"DOMNodeInserted",function(a){var b=h.target(a);Object.observe(b,function(a){n.fire(b,"change",a)})},"mutation",D,"all"),n.add(D,"DOMNodeRemoved",function(a){var c=h.target(a);void 0!==c.id&&(!m.isEmpty(c.id)&&a.relatedNode instanceof Element)&&b(c)},"mutation",D,"all"),n.add(H,"hash",function(b){(u.route.enabled||a.route.enabled)&&
v.load(b)},"route",this.route,"all"));!s.ie||8<s.version?(h.property(this.state,"current",{enumerable:!0,get:F.getCurrent,set:F.setCurrent}),h.property(this.state,"previous",{enumerable:!0,get:F.getPrevious,set:F.setPrevious}),h.property(this.state,"header",{enumerable:!0,get:F.getHeader,set:F.setHeader}),h.property(u.state,"current",{enumerable:!0,get:F.getCurrent,set:F.setCurrent}),h.property(u.state,"previous",{enumerable:!0,get:F.getPrevious,set:F.setPrevious}),h.property(u.state,"header",{enumerable:!0,
get:F.getHeader,set:F.setHeader})):(u.state.current=a.state.current=a.state._current,u.state.change=this.state.change=function(b){return a.state.current=F.setCurrent(b)},u.state.setHeader=this.state.setHeader=function(b){return a.state.header=F.setHeader(b)});u.ready=!0;switch(!0){case "undefined"!==typeof exports:case "function"===typeof define:this.init();break;case r.complete_loaded.test(z.readyState):this.init();break;case "function"===typeof z.addEventListener:z.addEventListener("DOMContentLoaded",
function(){a.init.call(a)},!1);break;case "function"===typeof z.attachEvent:z.attachEvent("onreadystatechange",c);break;default:h.repeat(c)}return u},clear:l.clear,clearTimer:h.clearTimers,clone:h.clone,coerce:h.coerce,compile:h.compile,create:l.create,css:h.css,data:V.decorator,datalist:S.factory,discard:function(a){return n.discard(a)},debounce:h.debounce,decode:G.decode,defer:function(){return new $},define:h.define,del:function(a,b,c,d,e){return s.request(a,"DELETE",b,c,null,d,e)},delay:h.defer,
destroy:l.destroy,encode:G.encode,error:h.error,expire:B.clean,expires:12E4,extend:h.extend,filter:ea.factory,fire:function(a,b){var c="object"===typeof a,c=[c?a:this!==u?this:H,c?b:a].concat(g.cast(arguments).remove(0,!c?0:1));return n.fire.apply(n,c)},genId:h.genId,get:function(a,b,c,d,e){return s.request(a,"GET",b,c,null,d,e)},grid:function(a,b,c,d,e,g,h){return(new ba(a,b,c,d,e,g)).init(h)},guid:function(){return h.uuid().toUpperCase()},hash:v.hash,headers:function(a,b,c,d){return s.request(a,
"HEAD",b,c,null,{},d)},hex:h.hex,hidden:l.hidden,hook:n.decorate,id:"abaaso",init:function(){delete H.init;return n.fire(this,"init, ready").un(this,"init, ready")},iterate:h.iterate,jsonp:function(a,b,c,d){return s.jsonp(a,b,c,d)},listeners:function(a,b){a="object"===typeof a?a:this!==u?this:H;return n.list(a,b)},listenersTotal:n.sum,log:h.log,logging:n.log,merge:h.merge,module:h.module,object:h.object,observerable:n.decorate,on:function(a,b,c,d,e,g){var h;"object"===typeof a?(h=a,a=b,b=c,c=d,d=
e,e=g):h=this!==u?this:H;void 0===d&&(d=h);return n.add(h,a,b,c,d,e)},once:function(a,b,c,d,e,g){var h;"object"===typeof a?(h=a,a=b,b=c,c=d,d=e,e=g):h=this!==u?this:H;void 0===d&&(d=h);return n.once(h,a,b,c,d,e)},options:function(a,b,c,d){return s.request(a,"OPTIONS",b,c,null,null,d)},parse:h.parse,patch:function(a,b,c,d,e,g){return s.request(a,"PATCH",b,c,d,e,g)},pause:function(a){return n.pause(!1!==a)},permissions:s.permissions,position:l.position,post:function(a,b,c,d,e,g){return s.request(a,
"POST",b,c,d,e,g)},prepend:function(a,b,c){c instanceof Element&&c.genId();return l.create(a,b,c,"first")},promise:x.factory,property:h.property,put:function(a,b,c,d,e,g){return s.request(a,"PUT",b,c,d,e,g)},queryString:function(a,b){return h.queryString(a,b)},random:w.random,ready:!1,reflect:h.reflect,repeat:h.repeat,stylesheet:h.stylesheet,script:h.script,stop:h.stop,store:V.decorator,target:h.target,tpl:h.tpl,un:function(a,b,c,d){var e;"object"===typeof a?(e=a,a=b,b=c,c=d):e=this!==u?this:H;return n.remove(e,
a,b,c)},update:l.update,uuid:h.uuid,validate:J.test,version:"3.7.14",walk:h.walk,when:h.when}}(),O=H.bootstrap(),"undefined"!==typeof exports?module.exports=O:"function"===typeof define?define("abaaso",function(){return O}):D.abaaso=O)})(this);
//@ sourceMappingURL=abaaso.map
